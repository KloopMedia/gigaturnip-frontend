(this["webpackJsonpgigaturnip-frontend"]=this["webpackJsonpgigaturnip-frontend"]||[]).push([[0],{305:function(e){e.exports=JSON.parse('{"properties":{"label":{"type":"string","title":"Label"}},"type":"object"}')},310:function(e){e.exports=JSON.parse('{"type":"object","title":"Stage options","description":"Describe the stage you want.","properties":{"name":{"title":"Stage name","type":"string","description":"Example: Violation description form"},"description":{"title":"Stage description","type":"string","description":"Example: Form that describes an election violation","default":""},"is_creatable":{"type":"boolean","title":"Task is creatable","default":false},"copy_input":{"type":"boolean","title":"Copy input","default":false},"webhook_address":{"title":"Webhook address","type":"string","format":"uri"},"webhook_params":{"title":"Webhook parameters","type":"string"},"library":{"title":"Library","type":"string","default":""},"displayed_prev_stages":{"items":{"type":"number","title":"Stage"},"title":"Background Stages","type":"array"}},"dependencies":{},"required":["name"]}')},332:function(e,t,n){},511:function(e,t,n){},571:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(18),r=n.n(c),o=(n(332),n(25)),s=n.n(o),l=n(11),u=n(42),d=n(38),j=n(14),p=n(53),b=n(36),h=n(613),f=n(643),O=n(616),g=n(5),m=Object(h.a)((function(e){return Object(f.a)({root:{background:"#FFF",borderColor:"#000",borderWidth:"1px",borderStyle:"solid",borderRadius:"3px",fontSize:"12px",width:"150px",textAlign:"center",padding:10}})})),x=function(e){var t=e.data,n=e.style,a=m();return Object(g.jsxs)(O.a,{className:a.root,style:n,children:[Object(g.jsx)("div",{children:t.label}),Object(g.jsx)(p.b,{type:"target",position:p.c.Top,style:{borderRadius:"100%"}}),Object(g.jsx)(p.b,{type:"source",position:p.c.Bottom,style:{borderRadius:"100%"}})]})},v={borderColor:"#0041d0"},y=function(e){var t=e.data;return Object(g.jsx)(x,{data:t,style:v})},w={borderColor:"#32CD32"},S=function(e){var t=e.data;return Object(g.jsx)(x,{data:t,style:w})},C=n(66),k=n(305),I=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(),r=Object(j.a)(c,2),o=r[0],s=r[1];Object(a.useEffect)((function(){o&&o.label&&""!==o.label?i(!0):i(!1)}),[o]);var u=function(e,t,n){console.log(t,n);var a=JSON.stringify(Object(l.a)(Object(l.a)({},o),{},{type:n}));e.dataTransfer.setData("application/reactflow",a),e.dataTransfer.effectAllowed="move"},d=function(){s(void 0)};return Object(g.jsxs)("aside",{children:[Object(g.jsx)("div",{className:"description",children:"You can drag these nodes to the pane on the right."}),Object(g.jsx)("div",{style:{marginRight:5},children:Object(g.jsx)(C.a,{schema:k,formData:o,onChange:function(e){return s(e.formData)},children:" "})}),Object(g.jsx)("div",{draggable:!1,style:{color:"red",display:"flex",justifyContent:"center",alignItems:"center",padding:10},children:!n&&"Enter Label to drag the node"}),Object(g.jsx)("div",{className:"dndnode stage",onDragEnd:d,onDragStart:function(e){return u(e,o?o.label:"","STAGE")},draggable:n,children:"Stage Node"}),Object(g.jsx)("div",{className:"dndnode logic",onDragEnd:d,onDragStart:function(e){return u(e,o?o.label:"","LOGIC")},draggable:n,children:"Logic Node"})]})},N=(n(511),n(306)),_="api/v1/campaigns/",E="api/v1/chains/",A="api/v1/taskstages/",L="api/v1/conditionalstages/",D="api/v1/tasks/",F=n.n(N).a.create({baseURL:"https://journal-bb5e3.uc.r.appspot.com/"});F.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="JWT "+t),e}),(function(e){return Promise.reject(e)}));var T=F,B=function(){return T.get("".concat(_,"?limit=1000")).then((function(e){return e.data})).then((function(e){return console.log(e),e.results}))},P=function(e,t){return T.get("".concat(A,"?chain__campaign=").concat(e,"&chain=").concat(t,"&limit=1000")).then((function(e){return e.data})).then((function(e){return e.results}))},G=function(e,t){return T.get("".concat(L,"?chain__campaign=").concat(e,"&chain=").concat(t,"&limit=1000")).then((function(e){return e.data})).then((function(e){return e.results}))},R=function(e,t){return t.filter((function(t){return t.id==e})).pop()},U=function(e){return"STAGE"===e.type?A:"LOGIC"===e.type?L:"MANUAL"===e.type?"api/v1/manualstages/":void 0},W=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,i,c,r,o,l,u,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.node,a=t.currentNodeId,i=t.type,c=t.method,!(r=U(n))){e.next=7;break}return e.next=5,T.get(r+n.id+"/").then((function(e){return"in"===i?e.data.in_stages:"out"===i?e.data.out_stages:void 0})).catch((function(e){}));case 5:(o=e.sent)&&(l=o.map((function(e){return e.toString()})),u=[],"create"===c&&(u=[a].concat(Object(d.a)(l))),"delete"===c&&(u=l.filter((function(e){return e!==a}))),j=void 0,"in"===i&&(j={in_stages:u}),"out"===i&&(j={out_stages:u}),j&&(console.log(j),T.patch(r+n.id+"/",j)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=R(t,a),c=R(n,a),i&&W({node:i,currentNodeId:n,type:"in",method:"create"}),c&&W({node:c,currentNodeId:t,type:"out",method:"create"});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=R(t,a),c=R(n,a),i&&W({node:i,currentNodeId:n,type:"in",method:"delete"}),c&&W({node:c,currentNodeId:t,type:"out",method:"delete"});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={name:t.label,x_pos:Math.round(t.position.x),y_pos:Math.round(t.position.y),chain:parseInt(n),out_stages:[]},console.log(a),!(i=U(t))){e.next=9;break}return e.next=6,T.post(i,a).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 6:return c=e.sent,console.log("stage",c),e.abrupt("return",c.id.toString());case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(a.useRef)(null),t=Object(b.f)(),n=Object(b.g)(),i=n.campaignId,c=n.chainId,r=Object(a.useState)(null),o=Object(j.a)(r,2),h=o[0],f=o[1],O=Object(a.useState)([]),m=Object(j.a)(O,2),x=m[0],v=m[1];Object(a.useEffect)((function(){Promise.all([P(i,c),G(i,c)]).then((function(e){var t=e[0],n=e[1];t.forEach((function(e){return e.type="STAGE"})),n.forEach((function(e){return e.type="LOGIC"}));var a=[].concat(Object(d.a)(t),Object(d.a)(n)),i=a.map((function(e){return{id:e.id.toString(),position:{x:parseFloat(e.x_pos),y:parseFloat(e.y_pos)},data:{label:e.name},type:e.type}}));return v(i),a})).then((function(e){e.forEach((function(e){e.in_stages.length>0&&e.in_stages.forEach((function(t){var n={source:t.toString(),target:e.id.toString(),id:"".concat(t,"-").concat(e.id),arrowHeadType:"arrow"};v((function(e){return Object(p.e)(n,e)}))}))}))}))}),[c]);var w=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(l.a)(Object(l.a)({},t),{},{arrowHeadType:"arrow"}),a=n.target,i=n.source,v((function(e){return Object(p.e)(n,e)})),J(a,i,x);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var t=Object(u.a)(s.a.mark((function t(n){var a,i,r,o,l,u,d,j;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.current.getBoundingClientRect(),i=n.dataTransfer.getData("application/reactflow"),r=h.project({x:n.clientX-a.left,y:n.clientY-a.top}),o=JSON.parse(i),l=o.label,u=o.type,t.next=9,M({type:u,position:r,label:l},c);case 9:d=t.sent,j={id:d,type:u,position:r,data:{label:l}},v((function(e){return e.concat(j)}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(e,n){console.log(n);var a=t.location.pathname;n.id&&("LOGIC"===n.type&&t.push("".concat(a,"/createlogic/").concat(n.id)),"STAGE"===n.type&&t.push("".concat(a,"/createstage/").concat(n.id)),"default"===n.type&&(n.target||n.source)&&console.log("edge"))},N={LOGIC:y,STAGE:S};return Object(g.jsx)("div",{className:"dndflow",children:Object(g.jsxs)(p.d,{children:[Object(g.jsx)("div",{className:"reactflow-wrapper",ref:e,children:Object(g.jsx)(p.f,{nodeTypes:N,elements:x,onConnect:w,onElementsRemove:function(e){v((function(t){return function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){if(n.includes(e.id)){if(Object(p.g)(e)){var a=e.target,i=e.source;z(a,i,t)}else{var c=U(e);c&&T.delete(c+e.id+"/")}return!1}return!0}))}(e,t)}))},onNodeDoubleClick:k,onEdgeDoubleClick:k,onLoad:function(e){return f(e)},onDrop:C,onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onNodeDragStop:function(e,t){!function(e){var t={x_pos:Math.round(e.position.x),y_pos:Math.round(e.position.y)},n=U(e);console.log(t),n&&T.patch(n+e.id+"/",t).then((function(e){return console.log(e.data)}))}(t)},style:{width:"100%",height:700},children:Object(g.jsx)(p.a,{})})}),Object(g.jsx)(I,{})]})})},H=n(6),V=n(318),Y=n(310),X=n(619),$=n(620),K=n(102),Q=n(642),Z=function(e){var t=e.schema,n=e.uiSchema,a=!(!n["ui:options"]||!n["ui:options"].multiple)&&n["ui:options"].multiple;return Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{className:"form-label",children:null===t||void 0===t?void 0:t.title}),Object(g.jsx)("br",{}),Object(g.jsx)("input",{type:"file",multiple:a})]})},ee=n(20),te=function(e){var t=e.id,n=e.placeholder,a=e.required,i=e.readonly,c=e.disabled,r=e.label,o=e.value,s=e.onChange,l=e.onBlur,u=e.onFocus,d=e.autofocus,j=e.options,p=e.schema,b=e.rawErrors,h=void 0===b?[]:b,f="string"===p.type?"text":"".concat(p.type);return Object(g.jsxs)(ee.a.Group,{className:"mb-0",children:[Object(g.jsxs)(ee.a.Label,{className:h.length>0?"text-danger":"",children:[r||p.title,(r||p.title)&&a?"*":null]}),Object(g.jsx)(ee.a.Control,{id:t,placeholder:n,autoFocus:d,required:a,disabled:c,readOnly:i,className:h.length>0?"is-invalid":"",list:p.examples?"examples_".concat(t):void 0,type:f,value:o||0===o?o:"",onChange:function(e){var t=e.target.value;return s(""===t?j.emptyValue:t)},onBlur:function(e){var n=e.target.value;return l(t,n)},onFocus:function(e){var n=e.target.value;return u(t,n)}}),p.examples?Object(g.jsx)("datalist",{id:"examples_".concat(t),children:p.examples.concat(p.default?[p.default]:[]).map((function(e){return Object(g.jsx)("option",{value:e},e)}))}):null]})},ne=function(e){var t=e.id,n=e.schema,a=e.options,i=e.value,c=e.required,r=e.disabled,o=e.readonly,s=e.label,l=e.onChange,u=e.onBlur,d=e.onFocus,j=a.enumOptions,p=a.enumDisabled,b=function(e){var t=e.target.value;return l("boolean"==n.type?"false"!==t:t)},h=function(e){var n=e.target.value;return u(t,n)},f=function(e){var n=e.target.value;return d(t,n)},O=Boolean(a&&a.inline);return Object(g.jsxs)(ee.a.Group,{className:"mb-0",children:[Object(g.jsxs)(ee.a.Label,{className:"d-block",children:[s||n.title,(s||n.title)&&c?"*":null]}),j.map((function(e,n){var a=Array.isArray(p)&&-1!==p.indexOf(e.value),s=e.value==i;return Object(g.jsx)(ee.a.Check,{inline:O,label:e.label,id:"".concat(t,"_").concat(e.label),name:t,type:"radio",disabled:r||a||o,checked:s,required:c,value:e.value,onChange:b,onBlur:h,onFocus:f},n)}))]})},ae=function(e){var t=e.required,n=e.label,a=e.value,i=e.schema,c=e.rawErrors,r=void 0===c?[]:c;return a?Object(g.jsxs)(ee.a.Group,{className:"mb-0",children:[Object(g.jsxs)(ee.a.Label,{className:r.length>0?"text-danger":"",children:[n||i.title,(n||i.title)&&t?"*":null]}),Object(g.jsx)("br",{}),Object(g.jsx)("a",{href:a,children:a})]}):null},ie=function(e){e.id,e.schema,e.options,e.value,e.required,e.disabled,e.readonly,e.label,e.onChange,e.onBlur,e.onFocus;return Object(g.jsx)("p",{children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u0430\u0443\u0434\u0438\u043e"})},ce=function(e){var t=e.jsonSchema,n=e.uiSchema,i=e.formResponses,c=e.onJsonChange,r=e.onUiChange,o=t?JSON.parse(t):{},s=n?JSON.parse(n):{},u=JSON.stringify(Object(l.a)(Object(l.a)({},i),{},{json_schema:o,ui_schema:s})),d=Object(a.useState)(!1),p=Object(j.a)(d,2),b=p[0],h=p[1],f=Object(a.useState)(""),O=Object(j.a)(f,2),m=O[0],x=O[1],v=Object(a.useState)(""),y=Object(j.a)(v,2),w=y[0],S=y[1];console.log(t,n);var k={customfile:Z,autocomplete:te,RadioWidget:ne,customlink:ae,audio:ie};Object(a.useEffect)((function(){x(t),S(n)}),[t,n]);return Object(g.jsxs)("div",{children:[Object(g.jsx)(C.a,{schema:o,uiSchema:s,widgets:k,onSubmit:function(e){return console.log(e.formData)}}),Object(g.jsx)("br",{}),Object(g.jsx)(X.a,{checked:b,onChange:function(e){h(e.target.checked)},name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),b&&Object(g.jsx)($.a,{color:"primary",variant:"contained",onClick:function(){console.log(m),console.log(w),c(m),r(w)},children:"Save Schemas"}),b&&Object(g.jsx)(K.a,{variant:"h6",color:"error",children:"\u041e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u043e: \u043c\u043e\u0436\u043d\u043e \u043b\u0435\u0433\u043a\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u044e \u043f\u0440\u043e\u0434\u0435\u043b\u0430\u043d\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443"}),Object(g.jsx)(Q.a,{id:"outlined-multiline-static",label:"JSON",multiline:!0,fullWidth:!0,variant:"outlined",InputProps:{readOnly:!b},value:m,onChange:function(e){x(e.target.value)},style:{marginTop:15,marginBottom:15}}),Object(g.jsx)(Q.a,{id:"outlined-multiline-static",label:"UI",multiline:!0,fullWidth:!0,variant:"outlined",InputProps:{readOnly:!b},value:w,onChange:function(e){S(e.target.value)},style:{marginTop:15,marginBottom:30}}),Object(g.jsx)("br",{}),Object(g.jsx)($.a,{onClick:function(){navigator.clipboard.writeText(u).then((function(){return console.log("success")})).catch((function(e){return alert(e)}))},variant:"contained",color:"primary",style:{marginBottom:15},children:"Copy FUL STAGE to Clipboard"}),Object(g.jsx)(Q.a,{id:"outlined-multiline-static",label:"FULL STAGE",multiline:!0,fullWidth:!0,variant:"outlined",InputProps:{readOnly:!0},value:u})]})},re={file:{displayName:"File",matchIf:[{types:["string"],widget:"customfile"}],possibleOptions:["private","multiple"],defaultDataSchema:{},defaultUiSchema:{"ui:widget":"customfile","ui:options":{private:!1,multiple:!1}},type:"string",cardBody:function(e){var t,n,a=e.parameters,i=e.onChange;return Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(g.jsxs)("div",{style:{display:"flex",alignItems:"baseline",padding:"0 10px"},children:[Object(g.jsx)("h5",{style:{padding:"0 5px"},children:"Private Upload"}),Object(g.jsx)("input",{checked:null===(t=a["ui:options"])||void 0===t?void 0:t.private,type:"checkbox",onChange:function(e){return i(Object(l.a)(Object(l.a)({},a),{},{"ui:options":Object(l.a)(Object(l.a)({},a["ui:options"]),{},{private:e.target.checked})}))},className:"card-text"})]}),Object(g.jsxs)("div",{style:{display:"flex",alignItems:"baseline",padding:"0 10px"},children:[Object(g.jsx)("h5",{style:{padding:"0 5px"},children:"Multiple Files"}),Object(g.jsx)("input",{checked:null===(n=a["ui:options"])||void 0===n?void 0:n.multiple,type:"checkbox",onChange:function(e){return i(Object(l.a)(Object(l.a)({},a),{},{"ui:options":Object(l.a)(Object(l.a)({},a["ui:options"]),{},{multiple:e.target.checked})}))},className:"card-text"})]})]})}}},oe=n(618),se={autocomplete:{displayName:"AutoComplete",matchIf:[{types:["string"],widget:"autocomplete"}],possibleOptions:["webhook","params","searchField","responseField"],defaultDataSchema:{},defaultUiSchema:{"ui:widget":"autocomplete","ui:options":{webhook:"",params:"",searchField:"",responseField:""}},type:"string",cardBody:function(e){var t,n,a,c,r=e.parameters,o=e.onChange;return Object(g.jsxs)(i.a.Fragment,{children:[Object(g.jsx)("h5",{children:"Webhook"}),Object(g.jsx)(oe.a,{value:null===(t=r["ui:options"])||void 0===t?void 0:t.webhook,placeholder:"Webhook",type:"text",onChange:function(e){return o(Object(l.a)(Object(l.a)({},r),{},{"ui:options":Object(l.a)(Object(l.a)({},r["ui:options"]),{},{webhook:e.target.value})}))},className:"card-text"}),Object(g.jsx)("br",{}),Object(g.jsx)("h5",{children:"Params"}),Object(g.jsx)(oe.a,{value:null===(n=r["ui:options"])||void 0===n?void 0:n.params,placeholder:"Params",type:"text",onChange:function(e){return o(Object(l.a)(Object(l.a)({},r),{},{"ui:options":Object(l.a)(Object(l.a)({},r["ui:options"]),{},{params:e.target.value})}))},className:"card-text"}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(g.jsxs)("div",{style:{width:"100%",paddingRight:7},children:[Object(g.jsx)("h5",{children:"Search Field"}),Object(g.jsx)(oe.a,{value:null===(a=r["ui:options"])||void 0===a?void 0:a.searchField,placeholder:"Search Field",type:"text",onChange:function(e){return o(Object(l.a)(Object(l.a)({},r),{},{"ui:options":Object(l.a)(Object(l.a)({},r["ui:options"]),{},{searchField:e.target.value})}))},className:"card-text"})]}),Object(g.jsxs)("div",{style:{width:"100%",paddingLeft:7},children:[Object(g.jsx)("h5",{children:"Response Field"}),Object(g.jsx)(oe.a,{value:null===(c=r["ui:options"])||void 0===c?void 0:c.responseField,placeholder:"Response Field",type:"text",onChange:function(e){return o(Object(l.a)(Object(l.a)({},r),{},{"ui:options":Object(l.a)(Object(l.a)({},r["ui:options"]),{},{responseField:e.target.value})}))},className:"card-text"})]})]})]})}}};var le={longAnswer:{displayName:"Long Answer",matchIf:[{types:["string"],widget:"textarea"}],possibleOptions:["rows"],defaultDataSchema:{},defaultUiSchema:{"ui:widget":"textarea"},type:"string",cardBody:function(e){var t=e.parameters,n=e.onChange;return Object(g.jsxs)(i.a.Fragment,{children:[Object(g.jsx)("h5",{children:"Default value"}),Object(g.jsx)(oe.a,{value:t.default,placeholder:"Default",type:"textarea",onChange:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{default:e.target.value}))},className:"card-textarea"})]})},modalBody:function(e){var t,n=e.parameters,a=e.onChange;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:"Minimum Length"}),Object(g.jsx)(oe.a,{value:n.minLength?n.minLength:"",placeholder:"Minimum Length",type:"number",onChange:function(e){a(Object(l.a)(Object(l.a)({},n),{},{minLength:parseInt(e.target.value,10)}))},className:"card-modal-number"},"minLength"),Object(g.jsx)("h4",{children:"Maximum Length"}),Object(g.jsx)(oe.a,{value:n.maxLength?n.maxLength:"",placeholder:"Maximum Length",type:"number",onChange:function(e){a(Object(l.a)(Object(l.a)({},n),{},{maxLength:parseInt(e.target.value,10)}))},className:"card-modal-number"},"maxLength"),Object(g.jsx)("h4",{children:"Rows"}),Object(g.jsx)(oe.a,{value:null===(t=n["ui:options"])||void 0===t?void 0:t.rows,placeholder:"Rows",type:"number",onChange:function(e){a(Object(l.a)(Object(l.a)({},n),{},{"ui:options":Object(l.a)(Object(l.a)({},n["ui:options"]),{},{rows:e.target.value})}))},className:"card-modal-number"},"rows")]})}}},ue={link:{displayName:"Link",matchIf:[{types:["string"],widget:"customlink"}],defaultDataSchema:{},defaultUiSchema:{"ui:widget":"customlink"},type:"string",cardBody:function(e){var t,n=e.parameters,a=e.onChange;return Object(g.jsxs)(i.a.Fragment,{children:[Object(g.jsx)("h5",{children:"Default value"}),Object(g.jsx)(oe.a,{value:null!==(t=n.default)&&void 0!==t?t:"",placeholder:"Default",type:"text",onChange:function(e){return a(Object(l.a)(Object(l.a)({},n),{},{default:e.target.value}))},className:"card-text"})]})}}},de=(n(300),n(573)),je=n(312),pe=n.n(je),be=n(313),he=n.n(be),fe=n(311),Oe=n.n(fe),ge=n(159),me=function(e){var t=e.data,n=e.handleChange,i=Object(a.useRef)(null),c=Object(a.useState)(""),r=Object(j.a)(c,2),o=r[0],s=r[1];window.matchMedia("(prefers-color-scheme: dark)").matches;return Object(a.useEffect)((function(){s(t)}),[]),Object(g.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:Object(g.jsx)(ge.a,{id:"EditorTinyMCE",onEditorChange:function(e,t){return s(a=e),void n(a);var a},value:o,tinymceScriptSrc:"/gigaturnip-frontend/tinymce/tinymce.min.js",onInit:function(e,t){return i.current=t},init:{plugins:"autosave save print preview paste importcss searchreplace autolink directionality code visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern noneditable help charmap emoticons autoresize",menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media link anchor codesample | ltr rtl",toolbar_sticky:!0,image_advtab:!0,importcss_append:!0,image_caption:!0,noneditable_noneditable_class:"mceNonEditable",toolbar_mode:"sliding",contextmenu:"link image imagetools table",autosave_prefix:"tinymce-autosave-{path}{query}-",save_onsavecallback:function(e){console.log(e)},content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})})},xe=function(e){var t=e.data;return Object(g.jsx)(ge.a,{id:"ViewerTinyMCE",value:t,toolbar:!1,inline:!1,disabled:!0,tinymceScriptSrc:"/gigaturnip-frontend/tinymce/tinymce.min.js",init:{plugins:"autoresize",menubar:!1,image_advtab:!0,importcss_append:!0}})},ve={audio:{displayName:"Audio",matchIf:[{types:["string"],widget:"audio"}],possibleOptions:["private","default"],defaultDataSchema:{},defaultUiSchema:{"ui:widget":"audio","ui:options":{private:!1,default:""}},type:"string",cardBody:function(e){var t,n,a,i=e.parameters,c=e.onChange;return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline",padding:"0 10px"},children:[Object(g.jsx)("h5",{style:{padding:"0 5px"},children:"Private Upload"}),Object(g.jsx)("input",{checked:null===(t=i["ui:options"])||void 0===t?void 0:t.private,type:"checkbox",onChange:function(e){return c(Object(l.a)(Object(l.a)({},i),{},{"ui:options":Object(l.a)(Object(l.a)({},i["ui:options"]),{},{private:e.target.checked})}))},className:"card-text"})]}),Object(g.jsx)("h5",{children:"Default Audio (Link)"}),Object(g.jsx)(oe.a,{value:null!==(n=null===(a=i["ui:options"])||void 0===a?void 0:a.default)&&void 0!==n?n:"",placeholder:"Default",type:"text",onChange:function(e){return c(Object(l.a)(Object(l.a)({},i),{},{"ui:options":Object(l.a)(Object(l.a)({},i["ui:options"]),{},{default:e.target.value})}))},className:"card-text"})]})}}},ye=["id","json_schema","ui_schema","rich_text","webhook_address","webhook_params"],we=["chain","webhook_params"],Se=function(){var e=Object(b.g)().id,t=Object(a.useState)(""),n=Object(j.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(""),o=Object(j.a)(r,2),s=o[0],u=o[1],d=Object(a.useState)(Y),p=Object(j.a)(d,2),h=p[0],f=(p[1],Object(a.useState)({})),O=Object(j.a)(f,2),m=O[0],x=O[1],v=Object(a.useState)(!1),y=Object(j.a)(v,2),w=y[0],S=y[1],k=Object(a.useState)(!1),I=Object(j.a)(k,2),N=I[0],_=I[1],E=Object(a.useState)(""),L=Object(j.a)(E,2),D=L[0],F=L[1];Object(a.useEffect)((function(){e&&T.get(A+e+"/").then((function(e){return e.data})).then((function(e){e.id;var t=e.json_schema,n=e.ui_schema,a=e.rich_text,i=e.webhook_address,r=e.webhook_params,o=Object(H.a)(e,ye);o.webhook_address=i||void 0,o.webhook_params=r?JSON.stringify(r):void 0,c(t),u(n),x(o),F(a)}))}),[e]);return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{style:{display:"block",float:"right"},children:[Object(g.jsx)(de.a,{onClick:function(){_(!N)},children:Object(g.jsx)(Oe.a,{fontSize:"large"})}),Object(g.jsx)(de.a,{onClick:function(){S((function(e){return!e}))},children:w?Object(g.jsx)(he.a,{fontSize:"large"}):Object(g.jsx)(pe.a,{fontSize:"large"})})]}),w?Object(g.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:N?Object(g.jsx)(xe,{data:D}):Object(g.jsx)(ce,{jsonSchema:i,uiSchema:s,formResponses:m,onJsonChange:function(e){c(e)},onUiChange:function(e){u(e)}})}):Object(g.jsxs)("div",{children:[N?Object(g.jsx)(me,{data:D,handleChange:function(e){console.log(e),F(e)}}):Object(g.jsx)(V.a,{schema:i,uischema:s,onChange:function(e,t){c(e),u(t)},mods:{customFormInputs:Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},re),se),le),ue),ve)}}),Object(g.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:Object(g.jsx)(C.a,{schema:h,formData:m,onChange:function(e){return x(e.formData)},onSubmit:function(){console.log("JSON SCHEMA",i),console.log("UI SCHEMA",s);m.chain;var t=m.webhook_params,n=Object(H.a)(m,we),a=t?JSON.parse(t):null,c=Object(l.a)(Object(l.a)({},n),{},{json_schema:i,ui_schema:s,rich_text:D,webhook_params:a});console.log(JSON.stringify(c)),T.patch(A+e+"/",c).then((function(e){return alert("Saved")})).catch((function(e){return alert(e)}))}})})]})]})},Ce=n(17),ke=n(625),Ie=n(641),Ne=n(205),_e=n(113),Ee=n.n(_e),Ae=n(146),Le=n.n(Ae),De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(Ne.B)(e),a=Object(Ne.G)(n,"",e,t),i=function(e,t){return function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""];return Object.keys(n).forEach((function(c){if("object"===typeof n[c]){var r=i.map((function(e){return"".concat(e,".").concat(c)}));n[c].__rjsf_additionalProperties&&""!==n[c].$name?a.push(n[c].$name):e(n[c],a,r)}else"$name"===c&&""!==n[c]&&i.forEach((function(e){e=e.replace(/^\./,"");var n=Ee()(t,e);("object"!==typeof n||Le()(n))&&a.push(e)}))})),a}(e)};return i(a,t)},Fe=function(){var e=Object(b.g)().id,t=Object(a.useState)(!1),n=Object(j.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)([]),o=Object(j.a)(r,2),p=o[0],h=o[1],f=Object(a.useState)({}),O=Object(j.a)(f,2),m=O[0],x=O[1],v=Object(a.useState)({}),y=Object(j.a)(v,2),w=y[0],S=y[1],k=Object(a.useState)(),I=Object(j.a)(k,2),N=I[0],_=I[1],E=Object(a.useState)(!1),D=Object(j.a)(E,2),F=D[0],B=D[1];Object(a.useEffect)((function(){T.get(L+e+"/").then((function(e){return e.data})).then((function(e){S(e.conditions),B(e.pingpong),console.log("PING PONG",e.pingpong)}))}),[e]),Object(a.useEffect)((function(){var t=function(t){if(t){var n=T.get(A+t+"/").then((function(e){return e.data}));return n||T.get(L+t+"/").then((function(e){return e.data}))}return T.get(L+e+"/").then((function(e){return e.data}))},n=function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.map(function(){var e=Object(u.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:return a=e.sent,e.abrupt("return",Object(Ce.a)({},n,a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e&&function(){var e=Object(u.a)(s.a.mark((function e(){var a,i,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(a=e.sent,!(i=F?a.out_stages:a.in_stages)){e.next=9;break}return e.next=7,n(i);case 7:r=e.sent,Promise.all(r).then((function(e){Object.keys(e).length>0&&(_(e),c(!0))}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[e,F]),Object(a.useEffect)((function(){if(N&&N.length>0){var e=N.map((function(e){var t=Object.values(e)[0],n=JSON.parse(t.json_schema),a={};n&&n.dependencies&&Object.keys(n.dependencies).length>0&&(a=n.dependencies);var i=De(n),c=Object.values(a);if(c.length>0){var r=c.map((function(e){return function(e){var t=null;return e.hasOwnProperty("oneOf")&&(t=e.oneOf),e.hasOwnProperty("allOf")&&(t=e.allOf),t?t.map((function(e){var t=Object(l.a)({type:"object"},e);return De(t)})).flat():[]}(e)})).flat();i=Array.from(new Set([].concat(Object(d.a)(p),Object(d.a)(r))))}return i})).flat();h(e)}}),[F,N]),Object(a.useEffect)((function(){x({items:{type:"object",title:"Logic",properties:{field:{enum:p,title:"Field",type:"string"},condition:{enum:["==","!=",">","<",">=","<=","ARRAY-CONTAINS","ARRAY-CONTAINS-NOT"],title:"Condition",type:"string"},value:{title:"Value",type:"string"}},dependencies:{},required:[]},title:"Logic Array",type:"array",dependencies:{},required:[]})}),[p]);return Object(g.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:i?Object(g.jsxs)("div",{children:[Object(g.jsx)(ke.a,{control:Object(g.jsx)(Ie.a,{checked:F,onChange:function(e){B(e.target.checked)},name:"PingPong",color:"primary"}),label:"Ping Pong"}),Object(g.jsx)(C.a,{schema:m,formData:w,onChange:function(e){return S(e.formData)},onSubmit:function(){var t={conditions:w,pingpong:F};console.log(w),T.patch(L+e+"/",t).then((function(e){return alert("Saved")})).catch((function(e){return alert(e)}))}})]}):Object(g.jsx)("p",{children:"No node connection or end_ui detected. Connect to one or check if form has fields."})})},Te=function(){var e=Object(b.g)(),t=e.id,n=e.chainId,a=Object(b.f)(),i=function(){var e=Object(u.a)(s.a.mark((function e(){var i,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.location.pathname.split("/actions")[0],e.next=3,T.post("api/v1/cases/",{chain:n}).then((function(e){return e.data}));case 3:return c=e.sent,console.log(c),e.next=7,T.post(D,{case:c.id,stage:t}).then((function(e){return e.data}));case 7:r=e.sent,console.log(r),a.push("".concat(i,"/task/").concat(r.id));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(O.a,{children:Object(g.jsxs)(O.a,{container:!0,justify:"center",style:{background:"#7FB3D5"},component:"div",children:[Object(g.jsx)(O.a,{item:!0,style:{margin:20},children:Object(g.jsx)($.a,{onClick:function(){var e=a.location.pathname.split("/actions")[0];console.log(e),a.push("".concat(e,"/createstage/").concat(t))},children:"Create Form"})}),Object(g.jsx)(O.a,{item:!0,style:{margin:20},children:Object(g.jsx)($.a,{onClick:i,children:"Create Task (for test)"})})]})})},Be=function(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)({}),r=Object(j.a)(c,2),o=r[0],l=r[1],d=Object(a.useState)({}),p=Object(j.a)(d,2),h=p[0],f=p[1],O=Object(b.g)().id;Object(a.useEffect)((function(){O&&function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get(D+O).then((function(e){return e.data}));case 2:return t=e.sent,e.next=5,a=t.stage,T.get(A+a).then((function(e){return e.data}));case 5:n=e.sent,console.log(t,n),f(t.responses),i(n.json_schema),l(n.ui_schema);case 10:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}()()}),[O]);return Object(g.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:Object(g.jsx)(C.a,{schema:n,uiSchema:o,formData:h,onChange:function(e){return f(e.formData)},onSubmit:function(){console.log(h);var e={responses:h};T.patch(D+O,e)}})})},Pe=n(7),Ge=n(55),Re=n(630),Ue=n(316),We=n.n(Ue),Je=n(315),ze=n.n(Je),Me=n(317),qe=n.n(Me),He=n(314),Ve=n.n(He),Ye=n(626),Xe=n(627),$e=n(628),Ke=n(623),Qe=n(640),Ze=n(629),et=n(645),tt=n(624),nt=n(574),at=n(631),it=n(632),ct=n(89);ct.a.initializeApp({apiKey:"AIzaSyCXiwOUNsbzKH7sbSAZrqA9f7VOeCMdUOQ",authDomain:"gigaturnip-b6b5b.firebaseapp.com",projectId:"gigaturnip-b6b5b",storageBucket:"gigaturnip-b6b5b.appspot.com",messagingSenderId:"414429242328",appId:"1:414429242328:web:a4685f5ac6895ea767c8ad",measurementId:"G-Y8JTEJMTET"});var rt=new ct.a.auth.GoogleAuthProvider;ct.a.firestore().settings({ignoreUndefinedProperties:!0});var ot=function(){return rt.setCustomParameters({prompt:"select_account"}),ct.a.auth().signInWithPopup(rt)},st=function(){return ct.a.auth().signOut().then((function(){return localStorage.removeItem("token")})).then((function(){return window.location.reload()}))},lt=ct.a,ut=i.a.createContext(),dt=function(e){var t=e.children,n=Object(a.useState)(null),i=Object(j.a)(n,2),c=i[0],r=i[1];return Object(a.useEffect)((function(){lt.auth().onAuthStateChanged((function(e){e&&(r(e),e.getIdToken(!0).then((function(e){localStorage.setItem("token",e)})))})),lt.auth().onIdTokenChanged((function(e){e&&e.getIdToken(!1).then((function(e){localStorage.setItem("token",e)}))}))}),[]),Object(g.jsx)(ut.Provider,{value:{currentUser:c},children:t})},jt=240,pt=Object(h.a)((function(e){return Object(f.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:jt,width:"calc(100% - ".concat(jt,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:jt,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:jt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Ce.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1},title:{flexGrow:1},formControl:{margin:e.spacing(1),alignItems:"center"},selectEmpty:{marginTop:e.spacing(2)},select:{},selectIcon:{fill:"white",top:"calc(50% - 14px)"}})})),bt=function(e){var t,n,i=pt(),c=Object(Ge.a)(),r=Object(b.f)(),o=Object(b.g)().campaignId,s=Object(a.useContext)(ut).currentUser,l=e.children,u=Object(a.useState)(!1),d=Object(j.a)(u,2),p=d[0],h=d[1],f=Object(a.useState)(o),m=Object(j.a)(f,2),x=m[0],v=m[1],y=Object(a.useState)([]),w=Object(j.a)(y,2),S=w[0],C=w[1];console.log("CURRENT CAMPAIGN",o),Object(a.useEffect)((function(){B().then((function(e){return C(e)}))}),[]);return Object(g.jsxs)("div",{className:i.root,children:[Object(g.jsx)(Ye.a,{}),Object(g.jsx)(Xe.a,{position:"fixed",className:Object(Pe.a)(i.appBar,Object(Ce.a)({},i.appBarShift,p)),children:Object(g.jsxs)($e.a,{children:[Object(g.jsx)(de.a,{color:"inherit","aria-label":"open drawer",onClick:function(){h(!0)},edge:"start",className:Object(Pe.a)(i.menuButton,Object(Ce.a)({},i.hide,p)),children:Object(g.jsx)(Ve.a,{})}),Object(g.jsx)(K.a,{variant:"h6",noWrap:!0,style:{cursor:"pointer"},onClick:function(){r.push("/")},children:"GigaTurnip Admin"}),Object(g.jsx)(O.a,{className:i.title}),Object(g.jsx)(K.a,{children:null===s||void 0===s?void 0:s.email}),Object(g.jsx)(Ke.a,{className:i.formControl,size:"small",children:Object(g.jsx)(Qe.a,{className:i.select,autoWidth:!0,labelId:"campaign-select-label",id:"campaign-select-label",value:x,onChange:function(e){var t=e.target.value;console.log(t),v(t),r.push("/campaign/".concat(t))},label:"Campaign",disableUnderline:!0,style:{color:"white"},inputProps:{classes:{icon:i.selectIcon}},children:S.map((function(e){return Object(g.jsx)(Ze.a,{value:e.id,children:e.name},"".concat(e.name,"_").concat(e.id))}))})}),s?Object(g.jsx)($.a,{onClick:st,color:"inherit",children:"Log out"}):Object(g.jsx)($.a,{onClick:ot,color:"inherit",children:"Login"})]})}),Object(g.jsxs)(et.a,{variant:"permanent",className:Object(Pe.a)(i.drawer,(t={},Object(Ce.a)(t,i.drawerOpen,p),Object(Ce.a)(t,i.drawerClose,!p),t)),classes:{paper:Object(Pe.a)((n={},Object(Ce.a)(n,i.drawerOpen,p),Object(Ce.a)(n,i.drawerClose,!p),n))},children:[Object(g.jsx)("div",{className:i.toolbar,children:Object(g.jsx)(de.a,{onClick:function(){h(!1)},children:"rtl"===c.direction?Object(g.jsx)(ze.a,{}):Object(g.jsx)(We.a,{})})}),Object(g.jsx)(Re.a,{}),Object(g.jsx)(tt.a,{children:Object(g.jsxs)(nt.a,{button:!0,onClick:function(){return e="chain",void r.push("/campaign/".concat(o,"/").concat(e));var e},children:[Object(g.jsx)(at.a,{children:Object(g.jsx)(qe.a,{})}),Object(g.jsx)(it.a,{primary:"Chains"})]})})]}),Object(g.jsxs)("main",{className:i.content,children:[Object(g.jsx)("div",{className:i.toolbar}),l]})]})},ht=n(63),ft=n(633),Ot=n(635),gt=n(634),mt=Object(h.a)({root:{width:300},extra:{marginBottom:15}}),xt=function(e){var t=mt(),n=e.data,a=n.id,i=n.name,c=n.description,r=n.campaign,o=e.onCardButtonClick;e.openCampaignInfo;return Object(g.jsxs)(ft.a,{className:t.root,children:[Object(g.jsxs)(gt.a,{children:[Object(g.jsx)(K.a,{variant:"h5",component:"h2",gutterBottom:!0,children:i}),Object(g.jsxs)(K.a,{className:t.extra,variant:"subtitle2",color:"textSecondary",children:["ID: ",a," ",r&&"Campaign: ".concat(r)]}),Object(g.jsx)(K.a,{variant:"body1",component:"p",children:c||Object(g.jsx)("br",{})})]}),Object(g.jsx)(Ot.a,{children:Object(g.jsx)($.a,{size:"small",onClick:function(){o(a)},children:"Open"})})]})},vt=n(158),yt=n.n(vt),wt=n(636),St=n(637),Ct=n(638),kt=n(639),It=function(e){var t=e.title,n=e.onClose,i=e.onSave,c=e.open,r=Object(a.useState)(""),o=Object(j.a)(r,2),s=o[0],l=o[1],u=Object(a.useState)(""),d=Object(j.a)(u,2),p=d[0],b=d[1],h=function(){n()};return Object(g.jsxs)(wt.a,{onClose:h,"aria-labelledby":"simple-dialog-title",open:c,children:[Object(g.jsx)(St.a,{children:t}),Object(g.jsx)(Ct.a,{children:Object(g.jsxs)(O.a,{container:!0,justifyContent:"center",children:[Object(g.jsx)(O.a,{container:!0,item:!0,children:Object(g.jsx)(Q.a,{fullWidth:!0,label:"Name",onChange:function(e){var t=e.target.value;l(t||"")}})}),Object(g.jsx)(O.a,{container:!0,item:!0,children:Object(g.jsx)(Q.a,{fullWidth:!0,label:"Description",multiline:!0,rows:4,onChange:function(e){var t=e.target.value;b(t||"")}})})]})}),Object(g.jsxs)(kt.a,{children:[Object(g.jsx)($.a,{onClick:function(){i({name:s,description:p})},children:"Save"}),Object(g.jsx)($.a,{onClick:h,children:"Close"})]})]})},Nt=function(){var e=Object(b.f)(),t=Object(a.useState)([]),n=Object(j.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(!1),o=Object(j.a)(r,2),s=o[0],u=o[1],d=Object(b.g)().campaignId;Object(a.useEffect)((function(){(function(e){return T.get("".concat(E,"?campaign=").concat(e,"&limit=1000")).then((function(e){return e.data})).then((function(e){return e.results}))})(d).then((function(e){return c(e)}))}),[d]);var p=function(e){(function(e){return T.post(E,e)})(e).then((function(e){return window.location.reload()}))},h=function(t){e.push("".concat(e.location.pathname,"/").concat(t))};return Object(g.jsxs)(O.a,{container:!0,justifyContent:"center",children:[Object(g.jsx)(It,{title:"Add Chain",open:s,onSave:function(e){if(e.name&&d){var t=Object(l.a)(Object(l.a)({},e),{},{campaign:parseInt(d)});p(t),u(!1)}else alert("error: No name or campaign")},onClose:function(){u(!1)}}),Object(g.jsx)(O.a,{container:!0,style:{padding:20},children:Object(g.jsx)($.a,{variant:"contained",color:"primary",startIcon:Object(g.jsx)(yt.a,{}),onClick:function(){u(!0)},children:"Add Chain"})}),i.map((function(e){return Object(g.jsx)(O.a,{item:!0,style:{padding:10},children:Object(g.jsx)(xt,{data:e,onCardButtonClick:h})},e.id)}))]})},_t=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(!1),r=Object(j.a)(c,2),o=r[0],s=r[1],l=Object(b.f)();Object(a.useEffect)((function(){B().then((function(e){return i(e)}))}),[]);var u=function(e){l.push("/campaign/about/".concat(e))},d=function(e){(function(e){return T.post(_,e)})(e).then((function(e){return window.location.reload()}))},p=function(e){l.push("/campaign/".concat(e))};return Object(g.jsxs)(O.a,{container:!0,justifyContent:"center",children:[Object(g.jsx)(It,{title:"Add campaign",open:o,onSave:function(e){e.name?(d(e),s(!1)):alert("error: No name")},onClose:function(){s(!1)}}),Object(g.jsx)(O.a,{container:!0,style:{padding:20},children:Object(g.jsx)($.a,{variant:"contained",color:"primary",startIcon:Object(g.jsx)(yt.a,{}),onClick:function(){s(!0)},children:"Add Campaign"})}),n.map((function(e){return Object(g.jsx)(O.a,{item:!0,style:{padding:10},children:Object(g.jsx)(xt,{data:e,onCardButtonClick:p,openCampaignInfo:u})},e.id)}))]})},Et=240,At=Object(h.a)((function(e){return Object(f.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Et,width:"calc(100% - ".concat(Et,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:Et,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Et,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Ce.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1},title:{flexGrow:1}})})),Lt=function(e){var t=At(),n=e.children,i=Object(a.useContext)(ut).currentUser;return Object(g.jsxs)("div",{className:t.root,children:[Object(g.jsx)(Ye.a,{}),Object(g.jsx)(Xe.a,{position:"fixed",children:Object(g.jsxs)($e.a,{children:[Object(g.jsx)(K.a,{className:t.title,variant:"h6",noWrap:!0,children:"GigaTurnip Admin"}),i?Object(g.jsx)($.a,{onClick:st,color:"inherit",children:"Log out"}):Object(g.jsx)($.a,{onClick:ot,color:"inherit",children:"Login"})]})}),Object(g.jsxs)("main",{className:t.content,children:[Object(g.jsx)("div",{className:t.toolbar}),n]})]})},Dt=function(){var e=Object(a.useContext)(ut).currentUser;if(e){var t=localStorage.getItem("token");e.getIdToken(!1).then((function(e){t?e!==t&&(localStorage.setItem("token",e),window.location.reload()):(localStorage.setItem("token",e),window.location.reload())}))}return Object(g.jsx)("div",{children:Object(g.jsx)(ht.a,{children:Object(g.jsxs)(b.c,{children:[Object(g.jsx)(b.a,{path:"/campaign/:campaignId",children:Object(g.jsxs)(bt,{children:[Object(g.jsx)(b.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/createstage/:id",children:Object(g.jsx)(Se,{})}),Object(g.jsx)(b.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/createlogic/:id",children:Object(g.jsx)(Fe,{})}),Object(g.jsx)(b.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/task/:id",children:Object(g.jsx)(Be,{})}),Object(g.jsx)(b.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/actions/:id",children:Object(g.jsx)(Te,{})}),Object(g.jsx)(b.a,{exact:!0,path:"/campaign/:campaignId/chain",children:Object(g.jsx)(Nt,{})}),Object(g.jsx)(b.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId",children:Object(g.jsx)(q,{})})]})}),Object(g.jsx)(b.a,{path:"/",children:Object(g.jsx)(Lt,{children:Object(g.jsx)(_t,{})})})]})})})},Ft=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,646)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(g.jsx)(dt,{children:Object(g.jsx)(Dt,{})}),document.getElementById("root")),Ft()}},[[571,1,2]]]);
//# sourceMappingURL=main.f43d522d.chunk.js.map