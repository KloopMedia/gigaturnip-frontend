{"version":3,"sources":["components/nodes/CustomNode.tsx","components/nodes/LogicNode.tsx","components/nodes/StageNode.tsx","components/sidebar/Sidebar.tsx","util/Urls.js","util/Axios.js","util/Util.tsx","components/graph/Graph.tsx","components/custom-widgets/file-widget/CustomFileWidget.tsx","components/custom-widgets/autocomplete/AutoCompleteWidget.tsx","components/custom-widgets/fixed-radio-widget/FixedRadioWidget.tsx","components/form-builders/PreviewStage.tsx","components/custom-widgets/file-widget/CustomFileType.tsx","components/custom-widgets/autocomplete/AutoCompleteType.tsx","components/custom-widgets/textarea-widget/CustomTextareaWidgetType.tsx","components/text-editor/TextEditor.tsx","components/text-editor/TextViewer.tsx","components/form-builders/StageBuilder.tsx","components/form-builders/GetFormFields.js","components/form-builders/LogicBuilder.tsx","components/actions/Actions.tsx","components/task/Task.tsx","util/Firebase.js","util/Auth.js","components/appbar/Appbar.tsx","components/cards/Card.tsx","components/dialogs/Dialog.tsx","components/chains/Chains.tsx","components/campaigns/Campaigns.tsx","components/appbar/SimpleAppbar.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","root","background","borderColor","borderWidth","borderStyle","borderRadius","fontSize","width","textAlign","padding","CustomNode","data","style","classes","Grid","className","label","type","position","Position","Top","Bottom","customNodeStyles","CustomLogicNode","CustomStageNode","Sidebar","useState","draggable","setDraggable","formResponses","setFormResponses","useEffect","onDragStart","event","nodeLabel","nodeType","console","log","JSON","stringify","dataTransfer","setData","effectAllowed","onDragEnd","undefined","marginRight","schema","formData","onChange","e","color","display","justifyContent","alignItems","campaignsUrl","chainsUrl","taskstagesUrl","conditionalstagesUrl","tasksUrl","instance","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","getCampaigns","get","then","res","results","getStageNodes","campaignId","chainId","getLogicNodes","getNode","id","elements","filter","node","pop","getUrl","updateConnections","a","currentNodeId","method","url","in_stages","out_stages","catch","err","connections","parsed","map","connection","toString","ids","patch","addConnections","target","source","targetNode","sourceNode","removeConnections","createNode","name","x_pos","Math","round","x","y_pos","y","chain","parseInt","post","stage","DnDFlow","reactFlowWrapper","useRef","history","useHistory","useParams","reactFlowInstance","setReactFlowInstance","setElements","all","stageNodes","logicNodes","forEach","allNodes","nodes","parseFloat","length","sourceId","edge","arrowHeadType","els","addEdge","onConnect","params","newParams","onDrop","preventDefault","reactFlowBounds","current","getBoundingClientRect","transfer","getData","project","clientX","left","clientY","top","parsedData","parse","newNode","es","concat","onElementDoubleClick","element","location","pathname","push","nodeTypes","LOGIC","STAGE","ref","onElementsRemove","elementsToRemove","nodeIdsToRemove","n","includes","isEdge","delete","removeElements","onNodeDoubleClick","onEdgeDoubleClick","onLoad","_reactFlowInstance","onDragOver","dropEffect","onNodeDragStop","updateNode","height","CustomFileWidget","props","uiSchema","multipleSelect","multiple","title","TextWidget","placeholder","required","readonly","disabled","value","onBlur","onFocus","autofocus","options","rawErrors","inputType","Form","Group","Label","Control","autoFocus","readOnly","list","examples","emptyValue","default","example","RadioWidget","enumOptions","enumDisabled","_onChange","_onBlur","_onFocus","inline","Boolean","option","i","itemDisabled","Array","isArray","indexOf","checked","Check","Preview","jsonSchema","onJsonChange","onUiChange","json_schema","ui_schema","stage_data","edit","setEdit","localJson","setLocalJson","localUi","setLocalUi","widgets","customfile","autocomplete","CustomAutoCompleteWidget","FixedRadioWidget","onSubmit","Switch","inputProps","Button","variant","onClick","Typography","TextField","multiline","fullWidth","InputProps","marginTop","marginBottom","navigator","clipboard","writeText","alert","CustomFileType","file","displayName","matchIf","types","widget","possibleOptions","defaultDataSchema","defaultUiSchema","private","cardBody","parameters","ev","CustomAutoCompleteType","webhook","searchField","responseField","Fragment","Input","paddingRight","paddingLeft","longAnswerInput","longAnswer","modalBody","minLength","maxLength","rows","TextEditor","handleChange","editorRef","docData","setDocData","window","matchMedia","matches","minWidth","margin","onEditorChange","newValue","editor","d","tinymceScriptSrc","process","onInit","evt","init","plugins","menubar","toolbar","toolbar_sticky","image_advtab","importcss_append","image_caption","noneditable_noneditable_class","toolbar_mode","contextmenu","autosave_prefix","save_onsavecallback","content_style","TextViewer","Builder","setSchema","setUiSchema","StageOptions","optionsSchema","preview","setPreview","editorView","setEditorView","editorData","setEditorData","rich_text","webhook_address","webhook_params","float","IconButton","p","PreviewStage","uischema","newSchema","newUiSchema","mods","customFormInputs","CustomTextareaType","responses","parsed_webhook_params","getFormFields","retrievedSchema","retrieveSchema","pathSchema","toPathSchema","getFieldNames","getAllPaths","_obj","acc","paths","Object","keys","key","newPaths","path","__rjsf_additionalProperties","$name","replace","formValue","_get","_isEmpty","ready","setReady","fields","setFields","connectedStages","setConnectedStages","pingPong","setPingPong","currentStage","conditions","pingpong","getStage","stageId","taskStage","getConnectedStages","connId","connectedIds","connStages","allFields","stageObject","values","stageSchema","deps","dependencies","stageFields","GetFormFields","depValues","depFields","dep","hasOwnProperty","oneOf","allOf","nested","fiction","flat","getDependentFields","from","Set","items","properties","field","enum","condition","FormControlLabel","control","Checkbox","handleCreateTask","split","caseData","case","taskData","container","justify","component","item","task","setFormData","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","provider","auth","GoogleAuthProvider","firestore","settings","ignoreUndefinedProperties","signInWithGoogle","setCustomParameters","prompt","signInWithPopup","signOut","removeItem","reload","AuthContext","React","createContext","AuthProvider","children","currentUser","setCurrentUser","onAuthStateChanged","user","getIdToken","idToken","setItem","onIdTokenChanged","Provider","drawerWidth","appBar","zIndex","drawer","transition","transitions","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","breakpoints","up","mixins","content","flexGrow","formControl","selectEmpty","select","selectIcon","fill","Appbar","useTheme","useContext","open","setOpen","campaign","setCampaign","allCampaigns","setAllCampaigns","CssBaseline","AppBar","clsx","Toolbar","aria-label","noWrap","cursor","email","FormControl","size","Select","autoWidth","labelId","disableUnderline","icon","camp","MenuItem","Drawer","paper","direction","Divider","List","ListItem","button","page","ListItemIcon","ListItemText","primary","extra","ParentCard","description","onCardButtonClick","openCampaignInfo","Card","CardContent","gutterBottom","CardActions","ParentDialog","onClose","onSave","setName","setDescription","handleClose","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogActions","chains","setChains","getChains","handleAddChain","createChain","handleCardRedirect","startIcon","campaigns","setCampaigns","handleCampaignAdd","createCampaign","App","exact","StageBuilder","LogicBuilder","Task","Actions","Chains","Graph","SimpleAppbar","Campaigns","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d3d9ea93.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Handle, Position} from 'react-flow-renderer';\r\nimport {createStyles, Grid, makeStyles, Theme} from \"@material-ui/core\";\r\nimport {NodeParams} from \"../../util/Types\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            background: '#FFF',\r\n            borderColor: '#000',\r\n            borderWidth: '1px',\r\n            borderStyle: 'solid',\r\n            borderRadius: '3px',\r\n            fontSize: '12px',\r\n            width: '150px',\r\n            textAlign: 'center',\r\n            padding: 10\r\n        },\r\n    }));\r\n\r\n\r\n\r\nconst CustomNode = ({data, style}: NodeParams) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Grid className={classes.root} style={style}>\r\n            <div>{data.label}</div>\r\n            <Handle\r\n                type=\"target\"\r\n                position={Position.Top}\r\n                style={{borderRadius: '100%'}}\r\n            />\r\n            <Handle\r\n                type=\"source\"\r\n                position={Position.Bottom}\r\n                style={{borderRadius: '100%'}}\r\n            />\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default CustomNode","import React from 'react';\r\nimport CustomNode from \"./CustomNode\";\r\nimport {NodeParams} from \"../../util/Types\";\r\n\r\nconst customNodeStyles = {\r\n  borderColor: '#0041d0'\r\n};\r\n\r\nconst CustomLogicNode = ({ data }: NodeParams) => <CustomNode data={data} style={customNodeStyles} />;\r\n\r\nexport default CustomLogicNode","import React from 'react';\r\nimport CustomNode from \"./CustomNode\";\r\nimport {NodeParams} from \"../../util/Types\";\r\n\r\nconst customNodeStyles = {\r\n  borderColor: '#32CD32'\r\n};\r\n\r\nconst CustomStageNode = ({ data }: NodeParams) => <CustomNode data={data} style={customNodeStyles} />;\r\n\r\nexport default CustomStageNode","import React, {useEffect, useState} from 'react';\r\nimport Form from \"@rjsf/bootstrap-4\";\r\nimport {JSONSchema7} from \"json-schema\";\r\n\r\nimport schema from '../../json-schema/SidebarSchema.json'\r\n\r\ntype FormResponsesProps = { label: string }\r\n\r\nconst Sidebar = () => {\r\n    const [draggable, setDraggable] = useState(false)\r\n    const [formResponses, setFormResponses] = useState<FormResponsesProps | undefined>()\r\n\r\n    useEffect(() => {\r\n\r\n        if (formResponses && formResponses.label && formResponses.label !== '') {\r\n            setDraggable(true)\r\n        } else {\r\n            setDraggable(false)\r\n        }\r\n    }, [formResponses])\r\n\r\n    const onDragStart = (event: { dataTransfer: DataTransfer }, nodeLabel: string, nodeType: string) => {\r\n        console.log(nodeLabel, nodeType)\r\n        let data = JSON.stringify({...formResponses, type: nodeType})\r\n        event.dataTransfer.setData('application/reactflow', data);\r\n        event.dataTransfer.effectAllowed = 'move';\r\n    };\r\n\r\n    const onDragEnd = () => {\r\n        setFormResponses(undefined)\r\n    }\r\n\r\n    return (\r\n        <aside>\r\n            <div className=\"description\">You can drag these nodes to the pane on the right.</div>\r\n            <div style={{marginRight: 5}}>\r\n                <Form schema={schema as JSONSchema7} formData={formResponses}\r\n                      onChange={(e) => setFormResponses(e.formData)}> </Form>\r\n            </div>\r\n            <div draggable={false} style={{\r\n                color: 'red',\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                padding: 10\r\n            }}>{!draggable && 'Enter Label to drag the node'}</div>\r\n            <div className=\"dndnode stage\" onDragEnd={onDragEnd}\r\n                 onDragStart={(event) => onDragStart(event, formResponses ? formResponses.label : '', 'STAGE')}\r\n                 draggable={draggable}>\r\n                Stage Node\r\n            </div>\r\n            <div className=\"dndnode logic\" onDragEnd={onDragEnd}\r\n                 onDragStart={(event) => onDragStart(event, formResponses ? formResponses.label : '', 'LOGIC')}\r\n                 draggable={draggable}>\r\n                Logic Node\r\n            </div>\r\n            {/*<div className=\"dndnode manual\" onDragEnd={onDragEnd}*/}\r\n            {/*     onDragStart={(event) => onDragStart(event, formResponses ? formResponses.label : '', 'STAGE')}*/}\r\n            {/*     draggable={draggable}>*/}\r\n            {/*    Document Node*/}\r\n            {/*</div>*/}\r\n        </aside>\r\n    );\r\n};\r\n\r\nexport default Sidebar","const baseUrl = \"https://journal-bb5e3.uc.r.appspot.com/\"\r\n// const baseUrl = \"http://127.0.0.1:8000/\"\r\nconst campaignsUrl = \"api/v1/campaigns/\"\r\nconst chainsUrl = \"api/v1/chains/\"\r\nconst taskstagesUrl = \"api/v1/taskstages/\"\r\nconst ranksUrl = \"api/v1/ranks/\"\r\nconst rankslimitsUrl = \"api/v1/ranklimits/\"\r\nconst webhookstagesUrl = \"api/v1/webhookstages/\"\r\nconst conditionalstagesUrl = \"api/v1/conditionalstages/\"\r\nconst manualstagesUrl = \"api/v1/manualstages/\" // TBD\r\nconst casesUrl = \"api/v1/cases/\"\r\nconst tasksUrl = \"api/v1/tasks/\"\r\n\r\nexport {\r\n    baseUrl,\r\n    campaignsUrl,\r\n    chainsUrl,\r\n    taskstagesUrl,\r\n    ranksUrl,\r\n    rankslimitsUrl,\r\n    webhookstagesUrl,\r\n    conditionalstagesUrl,\r\n    casesUrl,\r\n    tasksUrl,\r\n    manualstagesUrl\r\n}","import axios from \"axios\";\r\nimport {baseUrl} from \"./Urls\";\r\n\r\n\r\nconst instance = axios.create({\r\n    baseURL: baseUrl\r\n});\r\n\r\ninstance.interceptors.request.use(\r\n    function (config) {\r\n        const token = localStorage.getItem(\"token\");\r\n\r\n        if (token) {\r\n            config.headers[\"Authorization\"] = 'JWT ' + token;\r\n        }\r\n        return config;\r\n    },\r\n    function (error) {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default instance;","import axios from \"./Axios\";\r\nimport {campaignsUrl, chainsUrl, conditionalstagesUrl, manualstagesUrl, taskstagesUrl} from \"./Urls\";\r\nimport {FlowElement, isEdge} from \"react-flow-renderer\";\r\nimport {ConnectionsParams, CreateCampaignParams, CreateChainParams} from \"./Types\";\r\n\r\nconst IS_PAGINATION_ON = true;\r\n\r\nexport const getCampaigns = () => {\r\n    return axios.get(`${campaignsUrl}?limit=1000`)\r\n        .then(res => res.data)\r\n        .then(res => {\r\n            console.log(res)\r\n            return IS_PAGINATION_ON ? res.results : res\r\n        })\r\n}\r\n\r\nexport const getChains = (campaignId: string) => {\r\n    return axios.get(`${chainsUrl}?campaign=${campaignId}&limit=1000`)\r\n        .then(res => res.data)\r\n        .then(res => IS_PAGINATION_ON ? res.results : res)\r\n}\r\n\r\nexport const getStageNodes = (campaignId: string, chainId: string) => {\r\n    return axios.get(`${taskstagesUrl}?chain__campaign=${campaignId}&chain=${chainId}&limit=1000`)\r\n        .then(res => res.data)\r\n        .then(res => IS_PAGINATION_ON ? res.results : res)\r\n};\r\n\r\nexport const getLogicNodes = (campaignId: string, chainId: string) => {\r\n    return axios.get(`${conditionalstagesUrl}?chain__campaign=${campaignId}&chain=${chainId}&limit=1000`)\r\n        .then(res => res.data)\r\n        .then(res => IS_PAGINATION_ON ? res.results : res)\r\n};\r\n\r\nexport const createCampaign = (data: CreateCampaignParams) => {\r\n    return axios.post(campaignsUrl, data)\r\n}\r\n\r\nexport const createChain = (data: CreateChainParams) => {\r\n    return axios.post(chainsUrl, data)\r\n};\r\n\r\n\r\n// <------ Graph.tsx Functions Part ------>\r\n/**\r\n * Search node in elements (state) and return it.\r\n * @param id\r\n * @param elements\r\n * @return {FlowElement | undefined}\r\n */\r\nexport const getNode = (id: string | number, elements: FlowElement[]) => {\r\n    return elements.filter((node: any) => node.id == id).pop()\r\n}\r\n\r\n/**\r\n *\r\n * @param node\r\n * @returns {string | undefined}\r\n */\r\nexport const getUrl = (node: FlowElement) => {\r\n    if (node.type === \"STAGE\") {\r\n        return taskstagesUrl\r\n    }\r\n    if (node.type === \"LOGIC\") {\r\n        return conditionalstagesUrl\r\n    }\r\n    if (node.type === \"MANUAL\") {\r\n        return manualstagesUrl\r\n    }\r\n    return undefined\r\n}\r\n\r\n/**\r\n * Add or remove connections (in_stages && out_stages) in database via API\r\n * @param node - Source or Target of the current node\r\n * @param currentNodeId\r\n * @param type - 'in' (Incoming) or 'out' (Outgoing) connection\r\n * @param method - 'create' or 'delete'\r\n * @returns {Promise<void>}\r\n */\r\nexport const updateConnections = async ({node, currentNodeId, type, method}: ConnectionsParams) => {\r\n    // Returns url of given node type (logic or stage or undefined)\r\n    const url = getUrl(node)\r\n    if (url) {\r\n        // Get connections of a given node\r\n        const connections = await axios.get(url + node.id + '/').then(res => {\r\n            if (type === 'in') {\r\n                return res.data.in_stages\r\n            }\r\n            if (type === 'out') {\r\n                return res.data.out_stages\r\n            }\r\n            return undefined;\r\n        }).catch(err => undefined);\r\n\r\n        if (connections) {\r\n            // Change ids type to String\r\n            let parsed = connections.map((connection: string | number) => connection.toString())\r\n\r\n            let ids = []\r\n            // Add current node id to given node connections\r\n            if (method === 'create') {\r\n                ids = [currentNodeId, ...parsed]\r\n            }\r\n            if (method === 'delete') {\r\n                ids = parsed.filter((connection: string) => connection !== currentNodeId)\r\n            }\r\n\r\n            let data = undefined\r\n            if (type === 'in') {\r\n                data = {in_stages: ids}\r\n            }\r\n            if (type === 'out') {\r\n                data = {out_stages: ids}\r\n            }\r\n\r\n            if (data) {\r\n                console.log(data)\r\n                axios.patch(url + node.id + '/', data)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const addConnections = async (target: string, source: string, elements: FlowElement[]) => {\r\n    const targetNode = getNode(target, elements)\r\n    const sourceNode = getNode(source, elements)\r\n\r\n    if (targetNode) {\r\n        updateConnections({node: targetNode, currentNodeId: source, type: 'in', method: 'create'})\r\n    }\r\n\r\n    if (sourceNode) {\r\n        updateConnections({node: sourceNode, currentNodeId: target, type: 'out', method: 'create'})\r\n    }\r\n}\r\n\r\n\r\nexport const removeConnections = async (target: string, source: string, elements: FlowElement[]) => {\r\n    const targetNode = getNode(target, elements)\r\n    const sourceNode = getNode(source, elements)\r\n\r\n    if (targetNode) {\r\n        updateConnections({node: targetNode, currentNodeId: source, type: 'in', method: 'delete'})\r\n    }\r\n\r\n    if (sourceNode) {\r\n        updateConnections({node: sourceNode, currentNodeId: target, type: 'out', method: 'delete'})\r\n    }\r\n}\r\n\r\nexport const removeElements = (elementsToRemove: FlowElement[], elements: FlowElement[]) => {\r\n    let nodeIdsToRemove = elementsToRemove.map((n: any) => {\r\n        return n.id;\r\n    });\r\n\r\n    return elements.filter((element: any) => {\r\n        if (nodeIdsToRemove.includes(element.id)) {\r\n            if (isEdge(element)) {\r\n                let target = element.target\r\n                let source = element.source\r\n\r\n                removeConnections(target, source, elements)\r\n\r\n            } else {\r\n                const url = getUrl(element)\r\n                if (url) {\r\n                    axios.delete(url + element.id + '/')\r\n                }\r\n            }\r\n            return false\r\n        } else {\r\n            return true\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * Update node (stage) coordinates in database via API\r\n * @param node\r\n */\r\nexport const updateNode = (node: any) => {\r\n    let x_pos = Math.round(node.position.x)\r\n    let y_pos = Math.round(node.position.y)\r\n    let data = {x_pos, y_pos}\r\n    const url = getUrl(node)\r\n    console.log(data)\r\n    if (url) {\r\n        axios.patch(url + node.id + '/', data).then(res => console.log(res.data))\r\n    }\r\n}\r\n\r\n/**\r\n * Create node (stage) in database via API\r\n * @param node\r\n * @param chainId\r\n * @returns {Promise<string | undefined>}\r\n */\r\nexport const createNode = async (node: { type: string, position: { x: number, y: number }, label: string }, chainId: string) => {\r\n    let data = {\r\n        name: node.label,\r\n        x_pos: Math.round(node.position.x),\r\n        y_pos: Math.round(node.position.y),\r\n        chain: parseInt(chainId),\r\n        out_stages: []\r\n    }\r\n\r\n    console.log(data)\r\n\r\n    const url = getUrl(node as any)\r\n    if (url) {\r\n        let stage = await axios.post(url, data).then(res => res.data).catch(err => console.log(err))\r\n        console.log(\"stage\", stage)\r\n        return stage.id.toString()\r\n    }\r\n    return undefined;\r\n}","// noinspection ES6MissingAwait,JSIgnoredPromiseFromCall\r\n\r\nimport React, {useEffect, useRef, useState} from 'react';\r\nimport ReactFlow, {addEdge, Controls, Edge, FlowElement, ReactFlowProvider} from 'react-flow-renderer';\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport CustomLogicNode from '../nodes/LogicNode'\r\nimport CustomStageNode from '../nodes/StageNode'\r\nimport Sidebar from '../sidebar/Sidebar';\r\n\r\nimport '../../dnd.css';\r\nimport {RouterParams} from \"../../util/Types\";\r\nimport {addConnections, createNode, getLogicNodes, getStageNodes, removeElements, updateNode} from \"../../util/Util\";\r\n\r\n\r\nconst DnDFlow = () => {\r\n    const reactFlowWrapper = useRef(null);\r\n    const history = useHistory();\r\n    const {campaignId, chainId} = useParams<RouterParams>();\r\n\r\n    const [reactFlowInstance, setReactFlowInstance] = useState(null);\r\n    const [elements, setElements] = useState<FlowElement[]>([]);\r\n\r\n    // <------ UseEffect Part ------>\r\n    useEffect(() => {\r\n        Promise.all([getStageNodes(campaignId, chainId), getLogicNodes(campaignId, chainId)])\r\n            .then((results) => {\r\n                const stageNodes = results[0];\r\n                const logicNodes = results[1];\r\n\r\n                // Add types to nodes\r\n                stageNodes.forEach((node: any) => node.type = \"STAGE\")\r\n                logicNodes.forEach((node: any) => node.type = \"LOGIC\")\r\n\r\n                // Construct nodes and save to state\r\n                const allNodes = [...stageNodes, ...logicNodes]\r\n                const nodes: FlowElement[] = allNodes.map((node: any) => (\r\n                        {\r\n                            id: node.id.toString(),\r\n                            position: {x: parseFloat(node.x_pos), y: parseFloat(node.y_pos)},\r\n                            data: {label: node.name},\r\n                            type: node.type\r\n                        }\r\n                    )\r\n                )\r\n                setElements(nodes)\r\n                return allNodes\r\n            })\r\n            .then(allNodes => {\r\n                // Construct edges and save to state\r\n                allNodes.forEach(stage => {\r\n                    if (stage.in_stages.length > 0) {\r\n                        stage.in_stages.forEach((sourceId: string | number) => {\r\n                            const edge = {\r\n                                source: sourceId.toString(),\r\n                                target: stage.id.toString(),\r\n                                id: `${sourceId}-${stage.id}`,\r\n                                arrowHeadType: \"arrow\"\r\n                            } as Edge\r\n                            setElements((els) => addEdge(edge, els))\r\n                        })\r\n                    }\r\n                })\r\n            })\r\n    }, [chainId])\r\n\r\n\r\n    // <------ Frameworks Functions Part ------>\r\n\r\n    const onConnect = async (params: object) => {\r\n        const newParams: any = {...params, arrowHeadType: 'arrow'}\r\n        const target = newParams.target\r\n        const source = newParams.source\r\n\r\n        setElements((els: FlowElement[]) => addEdge(newParams, els))\r\n        addConnections(target, source, elements)\r\n    }\r\n\r\n    const onElementsRemove = (elementsToRemove: FlowElement[]) => {\r\n        setElements((els) => removeElements(elementsToRemove, els));\r\n    }\r\n\r\n    const onLoad = (_reactFlowInstance: any) =>\r\n        setReactFlowInstance(_reactFlowInstance);\r\n\r\n    const onDragOver = (event: any) => {\r\n        event.preventDefault();\r\n        event.dataTransfer.dropEffect = 'move';\r\n    };\r\n\r\n    const onDrop = async (event: any) => {\r\n        event.preventDefault();\r\n\r\n        // @ts-ignore\r\n        const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\r\n        // Get new node data from sidebar\r\n        const transfer = event.dataTransfer.getData('application/reactflow');\r\n        // @ts-ignore\r\n        const position = reactFlowInstance.project({\r\n            x: event.clientX - reactFlowBounds.left,\r\n            y: event.clientY - reactFlowBounds.top,\r\n        });\r\n\r\n        const parsedData = JSON.parse(transfer)\r\n        const label = parsedData.label\r\n        const type = parsedData.type\r\n\r\n        const id = await createNode({type, position, label}, chainId)\r\n\r\n        let newNode = {\r\n            id,\r\n            type,\r\n            position,\r\n            data: {label},\r\n        };\r\n\r\n        setElements((es) => es.concat(newNode));\r\n    };\r\n\r\n    const onNodeDragStop = (event: any, node: any) => {\r\n        updateNode(node)\r\n    }\r\n\r\n    const onElementDoubleClick = (event: any, element: any) => {\r\n        console.log(element)\r\n        let location = history.location.pathname\r\n        if (element.id) {\r\n            if (element.type === 'LOGIC') {\r\n                history.push(`${location}/createlogic/${element.id}`)\r\n            }\r\n            if (element.type === 'STAGE') {\r\n                history.push(`${location}/createstage/${element.id}`)\r\n            }\r\n            // if (element.type === 'DOC') {\r\n            //     history.push(`${location}/createdoc/${element.id}`)\r\n            // }\r\n            if (element.type === 'default' && (element.target || element.source)) {\r\n                console.log('edge')\r\n            }\r\n        }\r\n    }\r\n\r\n    // Init custom node types\r\n    const nodeTypes = {\r\n        LOGIC: CustomLogicNode,\r\n        STAGE: CustomStageNode\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"dndflow\">\r\n            <ReactFlowProvider>\r\n                <div className=\"reactflow-wrapper\" ref={reactFlowWrapper}>\r\n                    <ReactFlow\r\n                        nodeTypes={nodeTypes}\r\n                        elements={elements}\r\n                        onConnect={onConnect}\r\n                        onElementsRemove={onElementsRemove}\r\n                        onNodeDoubleClick={onElementDoubleClick}\r\n                        onEdgeDoubleClick={onElementDoubleClick}\r\n                        onLoad={onLoad}\r\n                        onDrop={onDrop}\r\n                        onDragOver={onDragOver}\r\n                        onNodeDragStop={onNodeDragStop}\r\n                        style={{\r\n                            width: '100%',\r\n                            height: 700,\r\n                        }}\r\n                    >\r\n                        <Controls/>\r\n                    </ReactFlow>\r\n                </div>\r\n                <Sidebar/>\r\n            </ReactFlowProvider>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DnDFlow;","import React from 'react'\r\n\r\n\r\nconst CustomFileWidget = (props: any) => {\r\n    const {schema, uiSchema} = props;\r\n    const multipleSelect = uiSchema[\"ui:options\"] && uiSchema[\"ui:options\"].multiple ? uiSchema[\"ui:options\"].multiple : false\r\n    return (\r\n        <div>\r\n            <label className={\"form-label\"}>{schema?.title}</label>\r\n            <br/>\r\n            <input type=\"file\" multiple={multipleSelect}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CustomFileWidget","import React from \"react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport { WidgetProps } from \"@rjsf/core\";\r\n\r\nconst TextWidget = ({\r\n  id,\r\n  placeholder,\r\n  required,\r\n  readonly,\r\n  disabled,\r\n  label,\r\n  value,\r\n  onChange,\r\n  onBlur,\r\n  onFocus,\r\n  autofocus,\r\n  options,\r\n  schema,\r\n  rawErrors = [],\r\n\r\n}: WidgetProps) => {\r\n  const _onChange = ({\r\n    target: { value },\r\n  }: React.ChangeEvent<HTMLInputElement>) =>\r\n    onChange(value === \"\" ? options.emptyValue : value);\r\n  const _onBlur = ({ target: { value } }: React.FocusEvent<HTMLInputElement>) =>\r\n    onBlur(id, value);\r\n  const _onFocus = ({\r\n    target: { value },\r\n  }: React.FocusEvent<HTMLInputElement>) => onFocus(id, value);\r\n  const inputType = (schema.type) === 'string' ?  'text' : `${schema.type}`\r\n    \r\n  return (\r\n    <Form.Group className=\"mb-0\">\r\n      <Form.Label className={rawErrors.length > 0 ? \"text-danger\" : \"\"}>\r\n        {label || schema.title}\r\n        {(label || schema.title) && required ? \"*\" : null}\r\n      </Form.Label>\r\n      <Form.Control\r\n        id={id}\r\n        placeholder={placeholder}\r\n        autoFocus={autofocus}\r\n        required={required}\r\n        disabled={disabled}\r\n        readOnly={readonly}\r\n        className={rawErrors.length > 0 ? \"is-invalid\" : \"\"}\r\n        list={schema.examples ? `examples_${id}` : undefined}\r\n        type={inputType}\r\n        value={value || value === 0 ? value : \"\"}\r\n        onChange={_onChange}\r\n        onBlur={_onBlur}\r\n        onFocus={_onFocus}\r\n\r\n      />\r\n      {schema.examples ? (\r\n        <datalist id={`examples_${id}`}>\r\n          {(schema.examples as string[])\r\n            .concat(schema.default ? ([schema.default] as string[]) : [])\r\n            .map((example: any) => {\r\n              return <option key={example} value={example} />;\r\n            })}\r\n        </datalist>\r\n      ) : null}\r\n    </Form.Group>\r\n  );\r\n};\r\n\r\nexport default TextWidget;","import React from \"react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport { WidgetProps } from \"@rjsf/core\";\r\n\r\nconst RadioWidget = ({\r\n  id,\r\n  schema,\r\n  options,\r\n  value,\r\n  required,\r\n  disabled,\r\n  readonly,\r\n  label,\r\n  onChange,\r\n  onBlur,\r\n  onFocus,\r\n}: WidgetProps) => {\r\n  const { enumOptions, enumDisabled } = options;\r\n\r\n  const _onChange = ({\r\n    target: { value },\r\n  }: React.ChangeEvent<HTMLInputElement>) =>\r\n    onChange(schema.type == \"boolean\" ? value !== \"false\" : value);\r\n  const _onBlur = ({ target: { value } }: React.FocusEvent<HTMLInputElement>) =>\r\n    onBlur(id, value);\r\n  const _onFocus = ({\r\n    target: { value },\r\n  }: React.FocusEvent<HTMLInputElement>) => onFocus(id, value);\r\n\r\n  const inline = Boolean(options && options.inline);\r\n\r\n  return (\r\n    <Form.Group className=\"mb-0\">\r\n      <Form.Label className=\"d-block\">\r\n        {label || schema.title}\r\n        {(label || schema.title) && required ? \"*\" : null}\r\n      </Form.Label>\r\n      {(enumOptions as any).map((option: any, i: number) => {\r\n        const itemDisabled =\r\n          Array.isArray(enumDisabled) &&\r\n          enumDisabled.indexOf(option.value) !== -1;\r\n        const checked = option.value == value;\r\n\r\n        const radio = (\r\n          <Form.Check\r\n            inline={inline}\r\n            label={option.label}\r\n            id={`${id}_${option.label}`}\r\n            key={i}\r\n            name={id}\r\n            type=\"radio\"\r\n            disabled={disabled || itemDisabled || readonly}\r\n            checked={checked}\r\n            required={required}\r\n            value={option.value}\r\n            onChange={_onChange}\r\n            onBlur={_onBlur}\r\n            onFocus={_onFocus}\r\n          />\r\n        );\r\n        return radio;\r\n      })}\r\n    </Form.Group>\r\n  );\r\n};\r\n\r\nexport default RadioWidget;","import React, {useEffect, useState} from 'react'\r\nimport Form from \"@rjsf/bootstrap-4\";\r\nimport {Button, Switch, TextField, Typography} from \"@material-ui/core\";\r\n\r\nimport CustomFileWidget from '../custom-widgets/file-widget/CustomFileWidget'\r\nimport {PreviewFormParams} from \"../../util/Types\";\r\nimport CustomAutoCompleteWidget from \"../custom-widgets/autocomplete/AutoCompleteWidget\";\r\nimport FixedRadioWidget from \"../custom-widgets/fixed-radio-widget/FixedRadioWidget\";\r\n\r\n\r\nconst Preview = ({jsonSchema, uiSchema, formResponses, onJsonChange, onUiChange}: PreviewFormParams) => {\r\n    const json_schema = jsonSchema ? JSON.parse(jsonSchema) : {}\r\n    const ui_schema = uiSchema ? JSON.parse(uiSchema) : {}\r\n    const stage_data = JSON.stringify({...formResponses, json_schema: json_schema, ui_schema: ui_schema})\r\n    const [edit, setEdit] = useState(false)\r\n    const [localJson, setLocalJson] = useState('')\r\n    const [localUi, setLocalUi] = useState('')\r\n\r\n    console.log(jsonSchema, uiSchema)\r\n\r\n    const widgets = {\r\n        customfile: CustomFileWidget,\r\n        autocomplete: CustomAutoCompleteWidget,\r\n        RadioWidget: FixedRadioWidget\r\n    };\r\n\r\n    useEffect(() => {\r\n        setLocalJson(jsonSchema)\r\n        setLocalUi(uiSchema)\r\n    }, [jsonSchema, uiSchema])\r\n\r\n    const copyToClipboard = () => {\r\n        navigator.clipboard.writeText(stage_data).then(() => console.log(\"success\")).catch(err => alert(err))\r\n    }\r\n\r\n    const handleJsonSchemaChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setLocalJson(event.target.value)\r\n    }\r\n\r\n    const handleUiSchemaChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setLocalUi(event.target.value)\r\n    }\r\n\r\n    const handleEditChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEdit(event.target.checked)\r\n    }\r\n\r\n    const handleSave = () => {\r\n        console.log(localJson)\r\n        console.log(localUi)\r\n        onJsonChange(localJson)\r\n        onUiChange(localUi)\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Form\r\n                schema={json_schema as any}\r\n                uiSchema={ui_schema}\r\n                widgets={widgets}\r\n                onSubmit={(formData) => console.log(formData.formData)}\r\n            />\r\n            <br/>\r\n            <Switch\r\n                checked={edit}\r\n                onChange={handleEditChange}\r\n                name=\"checkedA\"\r\n                inputProps={{'aria-label': 'secondary checkbox'}}\r\n            />\r\n            {edit && <Button color={\"primary\"} variant={\"contained\"} onClick={handleSave}>Save Schemas</Button>}\r\n            {edit && <Typography variant={\"h6\"} color={\"error\"}>\r\n                Осторожно: можно легко удалить всю проделанную работу\r\n            </Typography>}\r\n            <TextField\r\n                id=\"outlined-multiline-static\"\r\n                label=\"JSON\"\r\n                multiline\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                    readOnly: !edit,\r\n                }}\r\n                value={localJson}\r\n                onChange={handleJsonSchemaChange}\r\n                style={{marginTop: 15, marginBottom: 15}}\r\n            />\r\n            <TextField\r\n                id=\"outlined-multiline-static\"\r\n                label=\"UI\"\r\n                multiline\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                    readOnly: !edit,\r\n                }}\r\n                value={localUi}\r\n                onChange={handleUiSchemaChange}\r\n                style={{marginTop: 15, marginBottom: 30}}\r\n            />\r\n            <br/>\r\n            <Button onClick={copyToClipboard} variant={\"contained\"} color={\"primary\"} style={{marginBottom: 15}}>Copy\r\n                FUL STAGE to Clipboard</Button>\r\n            <TextField\r\n                id=\"outlined-multiline-static\"\r\n                label=\"FULL STAGE\"\r\n                multiline\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                    readOnly: true,\r\n                }}\r\n                value={stage_data}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preview","import React from 'react'\r\n\r\ntype Parameters = {\r\n    name: string,\r\n    path: string,\r\n    definitionData: any,\r\n    definitionUi: any,\r\n    category: string,\r\n    'ui:options': { private: boolean, multiple: boolean }\r\n};\r\n\r\nconst CustomFileField = ({\r\n                             parameters,\r\n                             onChange,\r\n                         }: { parameters: Parameters, onChange: (newParams: Parameters) => void, }) => (\r\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\r\n        <div style={{display: \"flex\", alignItems: \"baseline\", padding: \"0 10px\"}}>\r\n            <h5 style={{padding: \"0 5px\"}}>Private Upload</h5>\r\n            <input\r\n                checked={parameters['ui:options']?.private}\r\n                type=\"checkbox\"\r\n                onChange={(ev: React.ChangeEvent<any>) =>\r\n                    onChange({...parameters, \"ui:options\": {...parameters['ui:options'], private: ev.target.checked}})\r\n                }\r\n                className='card-text'\r\n            />\r\n        </div>\r\n        <div style={{display: \"flex\", alignItems: \"baseline\", padding: \"0 10px\"}}>\r\n            <h5 style={{padding: \"0 5px\"}}>Multiple Files</h5>\r\n            <input\r\n                checked={parameters['ui:options']?.multiple}\r\n                type=\"checkbox\"\r\n                onChange={(ev: React.ChangeEvent<any>) =>\r\n                    onChange({...parameters, \"ui:options\": {...parameters['ui:options'], multiple: ev.target.checked}})\r\n                }\r\n                className='card-text'\r\n            />\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst CustomFileType = {\r\n    file: {\r\n        displayName: \"File\",\r\n        matchIf: [\r\n            {\r\n                types: [\"string\"],\r\n                widget: \"customfile\"\r\n            },\r\n        ],\r\n        possibleOptions: ['private', 'multiple'],\r\n        defaultDataSchema: {},\r\n        defaultUiSchema: {\r\n            \"ui:widget\": \"customfile\",\r\n            \"ui:options\": {private: false, multiple: false}\r\n        },\r\n        type: \"string\",\r\n        cardBody: CustomFileField,\r\n        // modalBody: (parameters: any, onChange: any) => <div>\r\n        //     Extra editing options in modal appear hear\r\n        // </div>,\r\n    }\r\n};\r\n\r\nexport default CustomFileType","import React from 'react'\r\nimport {Input} from 'reactstrap';\r\n\r\ntype Parameters = {\r\n    name: string,\r\n    path: string,\r\n    definitionData: any,\r\n    definitionUi: any,\r\n    category: string,\r\n    'ui:options': { webhook: string, params: string, searchField: string, responseField: string }\r\n};\r\n\r\ntype CustomFieldProps = { parameters: Parameters, onChange: (newParams: Parameters) => void }\r\n\r\nconst CustomAutoCompleteField = ({parameters, onChange}: CustomFieldProps) => (\r\n    <React.Fragment>\r\n        <h5>Webhook</h5>\r\n        <Input\r\n            value={parameters['ui:options']?.webhook}\r\n            placeholder='Webhook'\r\n            type={'text'}\r\n            onChange={(ev: React.ChangeEvent<any>) =>\r\n                onChange({...parameters, \"ui:options\": {...parameters['ui:options'], webhook: ev.target.value}})\r\n            }\r\n            className='card-text'\r\n        />\r\n        <br/>\r\n        <h5>Params</h5>\r\n        <Input\r\n            value={parameters['ui:options']?.params}\r\n            placeholder='Params'\r\n            type={'text'}\r\n            onChange={(ev: React.ChangeEvent<any>) =>\r\n                onChange({...parameters, \"ui:options\": {...parameters['ui:options'], params: ev.target.value}})\r\n            }\r\n            className='card-text'\r\n        />\r\n        <br/>\r\n        <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\r\n            <div style={{width: '100%', paddingRight: 7}}>\r\n                <h5>Search Field</h5>\r\n                <Input\r\n                    value={parameters['ui:options']?.searchField}\r\n                    placeholder='Search Field'\r\n                    type={'text'}\r\n                    onChange={(ev: React.ChangeEvent<any>) =>\r\n                        onChange({...parameters, \"ui:options\": {...parameters['ui:options'], searchField: ev.target.value}})\r\n                    }\r\n                    className='card-text'\r\n                />\r\n            </div>\r\n            <div style={{width: '100%', paddingLeft: 7}}>\r\n                <h5>Response Field</h5>\r\n                <Input\r\n                    value={parameters['ui:options']?.responseField}\r\n                    placeholder='Response Field'\r\n                    type={'text'}\r\n                    onChange={(ev: React.ChangeEvent<any>) =>\r\n                        onChange({...parameters, \"ui:options\": {...parameters['ui:options'], responseField: ev.target.value}})\r\n                    }\r\n                    className='card-text'\r\n                />\r\n            </div>\r\n        </div>\r\n    </React.Fragment>\r\n);\r\n\r\n\r\nconst CustomAutoCompleteType = {\r\n    autocomplete: {\r\n        displayName: \"AutoComplete\",\r\n        matchIf: [\r\n            {\r\n                types: [\"string\"],\r\n                widget: \"autocomplete\"\r\n            },\r\n        ],\r\n        possibleOptions: ['webhook', 'params', 'searchField', 'responseField'],\r\n        defaultDataSchema: {},\r\n        defaultUiSchema: {\r\n            \"ui:widget\": \"autocomplete\",\r\n            \"ui:options\": {webhook: '', params: '', searchField: '', responseField: ''}\r\n        },\r\n        type: \"string\",\r\n        cardBody: CustomAutoCompleteField,\r\n        // modalBody: (parameters: any, onChange: any) => <div>\r\n        //     Extra editing options in modal appear hear\r\n        // </div>,\r\n    }\r\n};\r\n\r\nexport default CustomAutoCompleteType","// @flow\r\n\r\nimport React, {useState} from 'react';\r\nimport {Input} from 'reactstrap';\r\n\r\ntype Parameters = {\r\n    name: string,\r\n    path: string,\r\n    definitionData: any,\r\n    definitionUi: any,\r\n    category: string,\r\n    default: string,\r\n    minLength: number,\r\n    maxLength: number,\r\n    'ui:options': { rows: number }\r\n};\r\n\r\n// specify the inputs required for a string type object\r\nfunction CardLongAnswerParameterInputs({\r\n                                           parameters,\r\n                                           onChange,\r\n                                       }: {\r\n    parameters: Parameters,\r\n    onChange: (newParams: Parameters) => void,\r\n}) {\r\n    return (\r\n        <div>\r\n            <h4>Minimum Length</h4>\r\n            <Input\r\n                value={parameters.minLength ? parameters.minLength : ''}\r\n                placeholder='Minimum Length'\r\n                key='minLength'\r\n                type='number'\r\n                onChange={(ev: React.ChangeEvent<any>) => {\r\n                    onChange({\r\n                        ...parameters,\r\n                        minLength: parseInt(ev.target.value, 10),\r\n                    });\r\n                }}\r\n                className='card-modal-number'\r\n            />\r\n            <h4>Maximum Length</h4>\r\n            <Input\r\n                value={parameters.maxLength ? parameters.maxLength : ''}\r\n                placeholder='Maximum Length'\r\n                key='maxLength'\r\n                type='number'\r\n                onChange={(ev: React.ChangeEvent<any>) => {\r\n                    onChange({\r\n                        ...parameters,\r\n                        maxLength: parseInt(ev.target.value, 10),\r\n                    });\r\n                }}\r\n                className='card-modal-number'\r\n            />\r\n            <h4>Rows</h4>\r\n            <Input\r\n                value={parameters['ui:options']?.rows}\r\n                placeholder='Rows'\r\n                key='rows'\r\n                type='number'\r\n                onChange={(ev: React.ChangeEvent<any>) => {\r\n                    onChange({...parameters, \"ui:options\": {...parameters['ui:options'], rows: ev.target.value}})\r\n                }}\r\n                className='card-modal-number'\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LongAnswer({\r\n                        parameters,\r\n                        onChange,\r\n                    }: {\r\n    parameters: Parameters,\r\n    onChange: (newParams: Parameters) => void,\r\n}) {\r\n    return (\r\n        <React.Fragment>\r\n            <h5>Default value</h5>\r\n            <Input\r\n                value={parameters.default}\r\n                placeholder='Default'\r\n                type='textarea'\r\n                onChange={(ev: React.ChangeEvent<any>) =>\r\n                    onChange({...parameters, default: ev.target.value})\r\n                }\r\n                className='card-textarea'\r\n            />\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nconst longAnswerInput = {\r\n    longAnswer: {\r\n        displayName: 'Long Answer',\r\n        matchIf: [\r\n            {\r\n                types: ['string'],\r\n                widget: 'textarea',\r\n            },\r\n        ],\r\n        possibleOptions: ['rows'],\r\n        defaultDataSchema: {},\r\n        defaultUiSchema: {\r\n            'ui:widget': 'textarea',\r\n        },\r\n        type: 'string',\r\n        cardBody: LongAnswer,\r\n        modalBody: CardLongAnswerParameterInputs,\r\n    },\r\n};\r\n\r\nexport default longAnswerInput;","import React, {useEffect, useRef, useState} from \"react\";\r\nimport {Editor} from '@tinymce/tinymce-react';\r\n\r\nconst TextEditor = (props: {data: string, handleChange: (d: string) => void}) => {\r\n    const {data, handleChange} = props;\r\n    const editorRef = useRef<any>(null);\r\n    const [docData, setDocData] = useState(\"\")\r\n    const useDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n    const handleDataChange = (d:string) => {\r\n        // console.log(d)\r\n        setDocData(d)\r\n        handleChange(d)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setDocData(data)\r\n    }, [])\r\n\r\n    return (\r\n        <div style={{width: '70%', minWidth: '400px', margin: '0 auto', display: 'block', padding: 10}}>\r\n            <Editor\r\n                id={\"EditorTinyMCE\"}\r\n                onEditorChange={(newValue, editor) => handleDataChange(newValue)}\r\n                value={docData}\r\n                tinymceScriptSrc={process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'}\r\n                onInit={(evt, editor) => editorRef.current = editor}\r\n                init={{\r\n                    plugins: 'autosave save print preview paste importcss searchreplace autolink directionality code visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern noneditable help charmap emoticons autoresize',\r\n                    menubar: 'file edit view insert format tools table help',\r\n                    toolbar: 'undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media link anchor codesample | ltr rtl',\r\n                    toolbar_sticky: true,\r\n                    image_advtab: true,\r\n                    importcss_append: true,\r\n                    image_caption: true,\r\n                    noneditable_noneditable_class: 'mceNonEditable',\r\n                    toolbar_mode: 'sliding',\r\n                    contextmenu: 'link image imagetools table',\r\n                    autosave_prefix: 'tinymce-autosave-{path}{query}-',\r\n                    save_onsavecallback: function (a:any) { console.log(a); },\r\n                    // skin: useDarkMode ? 'oxide-dark' : 'oxide',\r\n                    // content_css: useDarkMode ? 'dark' : 'default',\r\n                    content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nexport default TextEditor","import {Editor} from \"@tinymce/tinymce-react\";\r\nimport React from \"react\";\r\n\r\n\r\nconst TextViewer = (props: {data: string}) => {\r\n    const {data} = props;\r\n\r\n    return (\r\n        <Editor\r\n            id={\"ViewerTinyMCE\"}\r\n            value={data}\r\n            toolbar={false}\r\n            inline={false}\r\n            disabled={true}\r\n            tinymceScriptSrc={process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'}\r\n            init={{\r\n                plugins: 'autoresize',\r\n                menubar: false,\r\n                image_advtab: true,\r\n                importcss_append: true,\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextViewer","import React, {useEffect, useState} from \"react\";\r\n// @ts-ignore\r\nimport {FormBuilder} from '@ginkgo-bioworks/react-json-schema-form-builder';\r\nimport Form from \"@rjsf/bootstrap-4\";\r\nimport StageOptions from '../../json-schema/StageOptions_v2.json'\r\nimport {useParams} from \"react-router-dom\";\r\nimport {JSONSchema7} from \"json-schema\";\r\nimport PreviewStage from './PreviewStage'\r\nimport CustomFileType from '../custom-widgets/file-widget/CustomFileType'\r\nimport CustomAutoCompleteType from '../custom-widgets/autocomplete/AutoCompleteType'\r\nimport CustomTextareaType from '../custom-widgets/textarea-widget/CustomTextareaWidgetType'\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axios from \"../../util/Axios\";\r\nimport {taskstagesUrl} from \"../../util/Urls\";\r\nimport {IconButton} from \"@material-ui/core\";\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport {RouterParams} from \"../../util/Types\";\r\nimport TextEditor from \"../text-editor/TextEditor\";\r\nimport TextViewer from \"../text-editor/TextViewer\";\r\n\r\n\r\nconst Builder = () => {\r\n    let {id} = useParams<RouterParams>();\r\n\r\n    const [schema, setSchema] = useState('')\r\n    const [uiSchema, setUiSchema] = useState('')\r\n    const [optionsSchema, setOptionsSchema] = useState<{ [index: string]: any }>(StageOptions)\r\n    const [formResponses, setFormResponses] = useState<{ [index: string]: any }>({})\r\n    const [preview, setPreview] = useState(false)\r\n    const [editorView, setEditorView] = useState(false)\r\n    const [editorData, setEditorData] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        const getStage = () => {\r\n            axios.get(taskstagesUrl + id + '/')\r\n                .then(res => res.data)\r\n                .then(res => {\r\n                    const {id, json_schema, ui_schema, rich_text, webhook_address, webhook_params, ...options} = res\r\n\r\n                    options[\"webhook_address\"] = webhook_address ? webhook_address : undefined\r\n                    options[\"webhook_params\"] = webhook_params ? JSON.stringify(webhook_params) : undefined\r\n\r\n                    setSchema(json_schema)\r\n                    setUiSchema(ui_schema)\r\n                    setFormResponses(options)\r\n                    setEditorData(rich_text)\r\n                })\r\n        }\r\n\r\n        if (id) {\r\n            getStage()\r\n        }\r\n    }, [id])\r\n\r\n    const handleSubmit = () => {\r\n        console.log(\"JSON SCHEMA\", schema)\r\n        console.log(\"UI SCHEMA\", uiSchema)\r\n\r\n        const {chain, webhook_params, ...responses} = formResponses\r\n\r\n        const parsed_webhook_params = webhook_params ? JSON.parse(webhook_params) : null;\r\n\r\n        const data = {...responses, json_schema: schema, ui_schema: uiSchema, rich_text: editorData, webhook_params: parsed_webhook_params}\r\n        console.log(JSON.stringify(data))\r\n        axios\r\n            .patch(taskstagesUrl + id + '/', data)\r\n            .then((res: any) => alert(\"Saved\"))\r\n            .catch((err: any) => alert(err));\r\n    }\r\n\r\n    const changePreviewMode = () => {\r\n        setPreview(p => !p)\r\n    }\r\n\r\n    const handleJsonSchemaChange = (schema: string) => {\r\n        setSchema(schema)\r\n    }\r\n\r\n    const handleUiSchemaChange = (schema: string) => {\r\n        setUiSchema(schema)\r\n    }\r\n\r\n    const handleEditorChange = (d: string) => {\r\n        console.log(d)\r\n        setEditorData(d)\r\n    }\r\n\r\n    const handleEditorViewMode = () => {\r\n        setEditorView(!editorView)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{display: 'block', float: 'right'}}>\r\n                <IconButton onClick={handleEditorViewMode}>\r\n                    <CreateIcon fontSize={\"large\"}/>\r\n                </IconButton>\r\n                <IconButton onClick={changePreviewMode}>\r\n                    {!preview ?\r\n                        <VisibilityIcon fontSize={\"large\"}/>\r\n                        :\r\n                        <VisibilityOffIcon fontSize={\"large\"}/>\r\n                    }\r\n                </IconButton>\r\n            </div>\r\n            {!preview ?\r\n                <div>\r\n                    {editorView ?\r\n                        <TextEditor data={editorData} handleChange={handleEditorChange}/>\r\n                        :\r\n                        <FormBuilder\r\n                            schema={schema}\r\n                            uischema={uiSchema}\r\n                            onChange={(newSchema: string, newUiSchema: string) => {\r\n                                setSchema(newSchema)\r\n                                setUiSchema(newUiSchema)\r\n                            }}\r\n                            mods={\r\n                                {\r\n                                    customFormInputs: {...CustomFileType, ...CustomAutoCompleteType, ...CustomTextareaType},\r\n                                }\r\n                            }\r\n                        />}\r\n                    <div style={{width: '70%', minWidth: '400px', margin: '0 auto', display: 'block', padding: 10}}>\r\n                        <Form\r\n                            schema={optionsSchema as JSONSchema7}\r\n                            formData={formResponses}\r\n                            onChange={(e: { formData: object }) => setFormResponses(e.formData)}\r\n                            onSubmit={handleSubmit}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                :\r\n                <div style={{width: '70%', minWidth: '400px', margin: '0 auto', display: 'block', padding: 10}}>\r\n                    {editorView ?\r\n                        <TextViewer data={editorData} />\r\n                        :\r\n                        <PreviewStage\r\n                            jsonSchema={schema}\r\n                            uiSchema={uiSchema}\r\n                            formResponses={formResponses}\r\n                            onJsonChange={handleJsonSchemaChange}\r\n                            onUiChange={handleUiSchemaChange}\r\n                        />\r\n                    }\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Builder\r\n\r\n\r\n","import {retrieveSchema, toPathSchema} from \"@rjsf/core/lib/utils\";\r\nimport _get from \"lodash/get\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\n\r\n/**\r\n * Get flatten fields from schema\r\n * @param schema\r\n * @param formData\r\n * @returns {*[]}\r\n */\r\nconst getFormFields = (schema, formData = {}) => {\r\n    const retrievedSchema = retrieveSchema(\r\n        schema\r\n    );\r\n\r\n    const pathSchema = toPathSchema(\r\n        retrievedSchema,\r\n        \"\",\r\n        schema,\r\n        formData\r\n    );\r\n\r\n    const getFieldNames = (pathSchema, formData) => {\r\n        const getAllPaths = (_obj, acc = [], paths = [\"\"]) => {\r\n            Object.keys(_obj).forEach(key => {\r\n                if (typeof _obj[key] === \"object\") {\r\n                    let newPaths = paths.map(path => `${path}.${key}`);\r\n                    // If an object is marked with additionalProperties, all its keys are valid\r\n                    if (_obj[key].__rjsf_additionalProperties && _obj[key].$name !== \"\") {\r\n                        acc.push(_obj[key].$name);\r\n                    } else {\r\n                        getAllPaths(_obj[key], acc, newPaths);\r\n                    }\r\n                } else if (key === \"$name\" && _obj[key] !== \"\") {\r\n                    paths.forEach(path => {\r\n                        path = path.replace(/^\\./, \"\");\r\n                        const formValue = _get(formData, path);\r\n                        // adds path to fieldNames if it points to a value\r\n                        // or an empty object/array\r\n                        if (typeof formValue !== \"object\" || _isEmpty(formValue)) {\r\n                            acc.push(path);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            return acc;\r\n        };\r\n        return getAllPaths(pathSchema);\r\n    };\r\n\r\n    return getFieldNames(pathSchema, formData);\r\n};\r\n\r\nexport default getFormFields","import React, {useEffect, useState} from \"react\";\r\nimport Form from \"@rjsf/bootstrap-4\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport {JSONSchema7} from \"json-schema\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport axios from '../../util/Axios'\r\nimport {conditionalstagesUrl, taskstagesUrl} from \"../../util/Urls\";\r\nimport GetFormFields from './GetFormFields'\r\nimport getFormFields from './GetFormFields'\r\nimport {RouterParams} from \"../../util/Types\";\r\n\r\n\r\nconst Builder = () => {\r\n    const {id} = useParams<RouterParams>();\r\n\r\n    const [ready, setReady] = useState(false)\r\n    const [fields, setFields] = useState<string[]>([]);\r\n    const [schema, setSchema] = useState<{}>({})\r\n    const [formResponses, setFormResponses] = useState({})\r\n    const [connectedStages, setConnectedStages] = useState<any[]>()\r\n    const [pingPong, setPingPong] = useState<boolean>(false)\r\n\r\n    useEffect(() => {\r\n        // Get current stage's data\r\n        axios.get(conditionalstagesUrl + id + '/').then(res => res.data).then(currentStage => {\r\n            setFormResponses(currentStage.conditions)\r\n            setPingPong(currentStage.pingpong)\r\n            console.log(\"PING PONG\", currentStage.pingpong)\r\n        })\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        const getStage = (stageId?: number | string) => {\r\n            if (stageId) {\r\n                let taskStage = axios.get(taskstagesUrl + stageId + '/').then(res => res.data)\r\n                if (taskStage) {\r\n                    return taskStage\r\n                } else {\r\n                    return axios.get(conditionalstagesUrl + stageId + '/').then(res => res.data)\r\n                }\r\n            }\r\n            return axios.get(conditionalstagesUrl + id + '/').then(res => res.data)\r\n        }\r\n\r\n        const getConnectedStages = async (ids: number[]) => {\r\n            return ids.map(async connId => {\r\n                let stage = await getStage(connId)\r\n                return {[connId]: stage}\r\n            })\r\n        }\r\n\r\n        const getData = async () => {\r\n            let currentStage = await getStage()\r\n\r\n            let connectedIds: undefined\r\n            if (pingPong) {\r\n                connectedIds = currentStage.out_stages\r\n            } else {\r\n                connectedIds = currentStage.in_stages\r\n            }\r\n            if (connectedIds) {\r\n                let connStages = await getConnectedStages(connectedIds)\r\n                Promise.all(connStages).then(res => {\r\n                    if (Object.keys(res).length > 0) {\r\n                        setConnectedStages(res)\r\n                        setReady(true)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        if (id) {\r\n            // noinspection JSIgnoredPromiseFromCall\r\n            getData()\r\n        }\r\n\r\n    }, [id, pingPong])\r\n\r\n    useEffect(() => {\r\n        /**\r\n         * Get fields from dependencies\r\n         * @param dep\r\n         * @returns {any}\r\n         */\r\n        const getDependentFields = (dep: any) => {\r\n            let data = null\r\n            if (dep.hasOwnProperty(\"oneOf\")) {\r\n                data = dep.oneOf\r\n            }\r\n            if (dep.hasOwnProperty(\"allOf\")) {\r\n                data = dep.allOf\r\n            }\r\n            if (data) {\r\n                return data.map((nested: any) => {\r\n                    let fiction = {type: \"object\", ...nested}\r\n                    return getFormFields(fiction)\r\n                }).flat()\r\n            }\r\n            return []\r\n        }\r\n\r\n        if (connectedStages && connectedStages.length > 0) {\r\n            const allFields = connectedStages.map(stageObject => {\r\n                let stage = Object.values(stageObject)[0] as any\r\n                let stageSchema = JSON.parse(stage.json_schema)\r\n\r\n                // Get dependencies from stage's schema\r\n                let deps = {}\r\n                if (stageSchema && stageSchema.dependencies && Object.keys(stageSchema.dependencies).length > 0) {\r\n                    deps = stageSchema.dependencies\r\n                }\r\n\r\n                // Get fields from schema's properties and dependencies\r\n                let stageFields = GetFormFields(stageSchema)\r\n                let depValues = Object.values(deps)\r\n                if (depValues.length > 0) {\r\n                    let depFields = depValues.map((dep: any) => getDependentFields(dep)).flat()\r\n                    stageFields = Array.from(new Set([...fields, ...depFields]))\r\n                }\r\n\r\n                return stageFields\r\n            }).flat()\r\n\r\n            setFields(allFields)\r\n        }\r\n    }, [pingPong, connectedStages])\r\n\r\n    useEffect(() => {\r\n        setSchema({\r\n            items: {\r\n                type: 'object',\r\n                title: 'Logic',\r\n                properties: {\r\n                    field: {\r\n                        enum: fields,\r\n                        title: 'Field',\r\n                        type: 'string'\r\n                    },\r\n                    condition: {\r\n                        enum: [\r\n                            '==',\r\n                            '!=',\r\n                            '>',\r\n                            '<',\r\n                            '>=',\r\n                            '<=',\r\n                            'ARRAY-CONTAINS',\r\n                            'ARRAY-CONTAINS-NOT'\r\n                        ],\r\n                        title: 'Condition',\r\n                        type: 'string'\r\n                    },\r\n                    value: {\r\n                        title: 'Value',\r\n                        type: 'string'\r\n                    }\r\n                },\r\n                dependencies: {},\r\n                required: []\r\n            },\r\n            title: 'Logic Array',\r\n            type: 'array',\r\n            dependencies: {},\r\n            required: []\r\n        })\r\n    }, [fields])\r\n\r\n    const handleSubmit = () => {\r\n        let data = {conditions: formResponses, pingpong: pingPong}\r\n        console.log(formResponses)\r\n\r\n        axios\r\n            .patch(conditionalstagesUrl + id + '/', data)\r\n            .then((res: any) => alert(\"Saved\"))\r\n            .catch((err: any) => alert(err));\r\n    }\r\n\r\n    const handleChangePingPong = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setPingPong(event.target.checked);\r\n    }\r\n\r\n    return (\r\n        <div style={{width: '70%', minWidth: '400px', margin: '0 auto', display: 'block', padding: 10}}>\r\n            {ready ?\r\n                <div>\r\n                    <FormControlLabel\r\n                        control={<Checkbox checked={pingPong} onChange={handleChangePingPong} name=\"PingPong\"\r\n                                           color=\"primary\"/>}\r\n                        label=\"Ping Pong\"\r\n                    />\r\n                    <Form\r\n                        schema={schema as JSONSchema7}\r\n                        formData={formResponses}\r\n                        onChange={(e: { formData: object }) => setFormResponses(e.formData)}\r\n                        onSubmit={handleSubmit}/>\r\n                </div>\r\n                :\r\n                <p>No node connection or end_ui detected. Connect to one or check if form has fields.</p>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Builder\r\n\r\n\r\n","import React from \"react\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\n\r\nimport {Button, Grid} from '@material-ui/core'\r\nimport axios from \"../../util/Axios\";\r\n\r\nimport {casesUrl, tasksUrl} from '../../util/Urls'\r\nimport {RouterParams} from \"../../util/Types\";\r\n\r\nconst Builder = () => {\r\n    let {id, chainId} = useParams<RouterParams>();\r\n    const history = useHistory();\r\n\r\n    const handleCreateStage = () => {\r\n        let location = history.location.pathname.split('/actions')[0]\r\n        console.log(location)\r\n        history.push(`${location}/createstage/${id}`)\r\n    }\r\n\r\n    const handleCreateTask = async () => {\r\n        let location = history.location.pathname.split('/actions')[0]\r\n        let caseData = await axios.post(casesUrl, {chain: chainId})\r\n            .then(res => res.data)\r\n        console.log(caseData)\r\n        let taskData = await axios.post(tasksUrl, {case: caseData.id, stage: id})\r\n            .then(res => res.data)\r\n        console.log(taskData)\r\n        history.push(`${location}/task/${taskData.id}`)\r\n    }\r\n\r\n    return (\r\n        <Grid>\r\n            <Grid container justify=\"center\" style={{background: '#7FB3D5'}} component={\"div\"}>\r\n                <Grid item style={{margin: 20}}>\r\n                    <Button onClick={handleCreateStage}>Create Form</Button>\r\n                </Grid>\r\n                <Grid item style={{margin: 20}}>\r\n                    <Button onClick={handleCreateTask}>Create Task (for test)</Button>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default Builder","import React, {useEffect, useState} from \"react\";\r\nimport Form from \"@rjsf/bootstrap-4\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport axios from \"../../util/Axios\";\r\nimport {taskstagesUrl, tasksUrl} from '../../util/Urls'\r\nimport {RouterParams} from \"../../util/Types\";\r\n\r\n\r\nconst Builder = () => {\r\n    const [schema, setSchema] = useState({})\r\n    const [uiSchema, setUiSchema] = useState({})\r\n    const [formResponses, setFormResponses] = useState({})\r\n    let {id} = useParams<RouterParams>();\r\n\r\n    useEffect(() => {\r\n        const getTask = () => {\r\n            return axios.get(tasksUrl + id).then(res => res.data)\r\n        }\r\n        const getStage = (stageId: string | number) => {\r\n            return axios.get(taskstagesUrl + stageId).then(res => res.data)\r\n        }\r\n        const setFormData = async () => {\r\n            let task = await getTask()\r\n            let stage = await getStage(task.stage)\r\n            console.log(task, stage)\r\n            setFormResponses(task.responses)\r\n            setSchema(stage.json_schema)\r\n            setUiSchema(stage.ui_schema)\r\n        }\r\n        if (id) {\r\n            setFormData()\r\n        }\r\n    }, [id])\r\n\r\n    const handleSubmit = () => {\r\n        console.log(formResponses)\r\n        let data = {responses: formResponses}\r\n        axios.patch(tasksUrl + id, data)\r\n    }\r\n\r\n    return (\r\n        <div style={{width: '70%', minWidth: '400px', margin: '0 auto', display: 'block', padding: 10}}>\r\n            <Form\r\n                schema={schema}\r\n                uiSchema={uiSchema}\r\n                formData={formResponses}\r\n                onChange={(e) => setFormResponses(e.formData)}\r\n                onSubmit={handleSubmit}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Builder\r\n\r\n\r\n","import firebase from 'firebase';\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCXiwOUNsbzKH7sbSAZrqA9f7VOeCMdUOQ\",\r\n    authDomain: \"gigaturnip-b6b5b.firebaseapp.com\",\r\n    projectId: \"gigaturnip-b6b5b\",\r\n    storageBucket: \"gigaturnip-b6b5b.appspot.com\",\r\n    messagingSenderId: \"414429242328\",\r\n    appId: \"1:414429242328:web:a4685f5ac6895ea767c8ad\",\r\n    measurementId: \"G-Y8JTEJMTET\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n// const db = firebase.firestore();\r\n// if (window.location.hostname === \"localhost\") {\r\n//   db.useEmulator(\"localhost\", 8080);\r\n// }\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nfirebase.firestore().settings({\r\n    ignoreUndefinedProperties: true,\r\n})\r\nexport const signInWithGoogle = () => {\r\n    provider.setCustomParameters({\r\n        prompt: 'select_account'\r\n    });\r\n    return firebase.auth().signInWithPopup(provider);\r\n};\r\n\r\nexport const signOut = () => {\r\n    return firebase.auth().signOut()\r\n        .then(() => localStorage.removeItem(\"token\"))\r\n        .then(() => window.location.reload())\r\n}\r\n\r\nexport default firebase;","import React, {useEffect, useState} from \"react\";\r\nimport firebase from \"./Firebase\";\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport const AuthProvider = ({children}) => {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n            if (user) {\r\n                setCurrentUser(user)\r\n                user.getIdToken(true).then((idToken) => {\r\n                    localStorage.setItem(\"token\", idToken);\r\n                })\r\n            }\r\n        });\r\n        firebase.auth().onIdTokenChanged(user => {\r\n            if (user) {\r\n                user.getIdToken(false).then((idToken) => {\r\n                    localStorage.setItem(\"token\", idToken);\r\n                })\r\n            }\r\n        })\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                currentUser\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n","import React, {useContext, useEffect, useState} from 'react';\r\nimport clsx from 'clsx';\r\nimport {createStyles, makeStyles, Theme, useTheme} from '@material-ui/core/styles';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\n\r\nimport {\r\n    AppBar,\r\n    Button,\r\n    CssBaseline,\r\n    Drawer,\r\n    FormControl,\r\n    Grid,\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    MenuItem,\r\n    Select,\r\n    Toolbar,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {signInWithGoogle, signOut} from '../../util/Firebase';\r\nimport {AuthContext} from \"../../util/Auth\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport axios from '../../util/Axios';\r\n\r\nimport {campaignsUrl} from '../../util/Urls';\r\nimport { AppbarParams, CampaignParams } from '../../util/Types';\r\nimport {getCampaigns} from \"../../util/Util\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n        },\r\n        appBar: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n        },\r\n        appBarShift: {\r\n            marginLeft: drawerWidth,\r\n            width: `calc(100% - ${drawerWidth}px)`,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        menuButton: {\r\n            marginRight: 36,\r\n        },\r\n        hide: {\r\n            display: 'none',\r\n        },\r\n        drawer: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n            whiteSpace: 'nowrap',\r\n        },\r\n        drawerOpen: {\r\n            width: drawerWidth,\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        drawerClose: {\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n            overflowX: 'hidden',\r\n            width: theme.spacing(7) + 1,\r\n            [theme.breakpoints.up('sm')]: {\r\n                width: theme.spacing(9) + 1,\r\n            },\r\n        },\r\n        toolbar: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'flex-end',\r\n            padding: theme.spacing(0, 1),\r\n            // necessary for content to be below app bar\r\n            ...theme.mixins.toolbar,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            // padding: theme.spacing(3),\r\n        },\r\n        title: {\r\n            flexGrow: 1\r\n        },\r\n        formControl: {\r\n            margin: theme.spacing(1),\r\n            alignItems: 'center'\r\n            // minWidth: 120,\r\n        },\r\n        selectEmpty: {\r\n            marginTop: theme.spacing(2),\r\n        },\r\n        select: {},\r\n        selectIcon: {\r\n            fill: 'white',\r\n            top: 'calc(50% - 14px)'\r\n        },\r\n    }),\r\n);\r\n\r\n\r\nconst Appbar = (props: AppbarParams) => {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const history = useHistory();\r\n    const {campaignId} = useParams<{ campaignId: string }>();\r\n    const {currentUser} = useContext(AuthContext)\r\n    const {children} = props;\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [campaign, setCampaign] = useState<number | string | unknown>(campaignId);\r\n    const [allCampaigns, setAllCampaigns] = useState<CampaignParams[]>([])\r\n\r\n    console.log(\"CURRENT CAMPAIGN\", campaignId)\r\n\r\n    useEffect(() => {\r\n        getCampaigns().then(res => setAllCampaigns(res))\r\n    }, [])\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleOptionClick = (page: string) => {\r\n        history.push(`/campaign/${campaignId}/${page}`)\r\n    };\r\n\r\n    const handleCampaignChange = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n        let value = event.target.value;\r\n        console.log(value)\r\n        setCampaign(value)\r\n        history.push(`/campaign/${value}`)\r\n    }\r\n\r\n    const redirectToMain = () => {\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline/>\r\n            <AppBar\r\n                position=\"fixed\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={handleDrawerOpen}\r\n                        edge=\"start\"\r\n                        className={clsx(classes.menuButton, {\r\n                            [classes.hide]: open,\r\n                        })}\r\n                    >\r\n                        <MenuIcon/>\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" noWrap style={{cursor: \"pointer\"}} onClick={redirectToMain}>\r\n                        GigaTurnip Admin\r\n                    </Typography>\r\n                    <Grid className={classes.title} />\r\n                    <Typography>{currentUser?.email}</Typography>\r\n                    <FormControl className={classes.formControl} size=\"small\">\r\n                        <Select\r\n                            className={classes.select}\r\n                            autoWidth\r\n                            labelId=\"campaign-select-label\"\r\n                            id=\"campaign-select-label\"\r\n                            value={campaign}\r\n                            onChange={handleCampaignChange}\r\n                            label=\"Campaign\"\r\n                            disableUnderline\r\n                            style={{color: 'white'}}\r\n                            inputProps={{\r\n                                classes: {\r\n                                    icon: classes.selectIcon,\r\n                                },\r\n                            }}\r\n                        >\r\n                            {allCampaigns.map(camp => <MenuItem key={`${camp.name}_${camp.id}`}\r\n                                                                value={camp.id}>{camp.name}</MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>\r\n                    {currentUser ?\r\n                        <Button onClick={signOut} color={\"inherit\"}>\r\n                            Log out\r\n                        </Button>\r\n                        :\r\n                        <Button onClick={signInWithGoogle} color={\"inherit\"}>\r\n                            Login\r\n                        </Button>\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Drawer\r\n                variant=\"permanent\"\r\n                className={clsx(classes.drawer, {\r\n                    [classes.drawerOpen]: open,\r\n                    [classes.drawerClose]: !open,\r\n                })}\r\n                classes={{\r\n                    paper: clsx({\r\n                        [classes.drawerOpen]: open,\r\n                        [classes.drawerClose]: !open,\r\n                    }),\r\n                }}\r\n            >\r\n                <div className={classes.toolbar}>\r\n                    <IconButton onClick={handleDrawerClose}>\r\n                        {theme.direction === 'rtl' ? <ChevronRightIcon/> : <ChevronLeftIcon/>}\r\n                    </IconButton>\r\n                </div>\r\n                <Divider/>\r\n                <List>\r\n                    {/*<ListItem button onClick={() => handleOptionClick(\"manual\")}>*/}\r\n                    {/*    <ListItemIcon><MenuBookIcon/></ListItemIcon>*/}\r\n                    {/*    <ListItemText primary={\"Manual\"}/>*/}\r\n                    {/*</ListItem>*/}\r\n                    <ListItem button onClick={() => handleOptionClick(\"chain\")}>\r\n                        <ListItemIcon><InboxIcon/></ListItemIcon>\r\n                        <ListItemText primary={\"Chains\"}/>\r\n                    </ListItem>\r\n                </List>\r\n            </Drawer>\r\n            <main className={classes.content}>\r\n                <div className={classes.toolbar}/>\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Appbar\r\n","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {CardParams} from \"../../util/Types\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: 300,\r\n        // height: 200\r\n    },\r\n    extra: {\r\n        marginBottom: 15\r\n    }\r\n});\r\n\r\nconst ParentCard = (props: CardParams) => {\r\n    const classes = useStyles();\r\n    const {id, name, description, campaign} = props.data;\r\n    const {onCardButtonClick, openCampaignInfo} = props;\r\n\r\n    const handleOpen = () => {\r\n        onCardButtonClick(id)\r\n    }\r\n\r\n    const redirectToInfoPage = () => {\r\n        if (openCampaignInfo) {\r\n            openCampaignInfo(id)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <Typography variant=\"h5\" component=\"h2\" gutterBottom={true}>\r\n                    {name}\r\n                </Typography>\r\n                <Typography className={classes.extra} variant=\"subtitle2\" color=\"textSecondary\">\r\n                    ID: {id} {campaign && `Campaign: ${campaign}`}\r\n                </Typography>\r\n                <Typography variant=\"body1\" component=\"p\">\r\n                    {description ? description : <br/>}\r\n                </Typography>\r\n            </CardContent>\r\n            <CardActions>\r\n                <Button size=\"small\" onClick={handleOpen}>Open</Button>\r\n                {/*<Button size=\"small\" onClick={redirectToInfoPage}>Info</Button>*/}\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default ParentCard","import React, {useState} from \"react\";\r\nimport {\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogActions,\r\n    DialogContent,\r\n    Grid,\r\n    TextField,\r\n    Button\r\n} from \"@material-ui/core\";\r\nimport {DialogParams} from \"../../util/Types\";\r\n\r\n\r\nconst ParentDialog = (props: DialogParams) => {\r\n    const {title, onClose, onSave, open} = props;\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n\r\n    const handleClose = () => {\r\n        onClose();\r\n    };\r\n\r\n    const handleSave = () => {\r\n        let data = {name, description}\r\n        onSave(data)\r\n    }\r\n\r\n    const handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        let value = event.target.value\r\n        if (value) {\r\n            setName(value)\r\n        } else {\r\n            setName('')\r\n        }\r\n    };\r\n\r\n    const handleDescriptionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        let value = event.target.value\r\n        if (value) {\r\n            setDescription(value)\r\n        } else {\r\n            setDescription('')\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>\r\n            <DialogTitle>{title}</DialogTitle>\r\n            <DialogContent>\r\n                <Grid container justifyContent={\"center\"}>\r\n                    <Grid container item><TextField fullWidth label={\"Name\"} onChange={handleNameChange}/></Grid>\r\n                    <Grid container item>\r\n                        <TextField fullWidth label={\"Description\"} multiline rows={4}\r\n                                   onChange={handleDescriptionChange}/>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleSave}>Save</Button>\r\n                <Button onClick={handleClose}>Close</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\nexport default ParentDialog","import React, {useEffect, useState} from \"react\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport {Button, Grid} from \"@material-ui/core\";\r\nimport Card from \"../cards/Card\";\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Dialog from '../dialogs/Dialog'\r\nimport {ChainParams, CreateChainParams, RouterParams} from \"../../util/Types\";\r\nimport {createChain, getChains} from \"../../util/Util\";\r\n\r\nconst Builder = () => {\r\n    const history = useHistory()\r\n    const [chains, setChains] = useState<ChainParams[]>([])\r\n    const [open, setOpen] = useState(false);\r\n    const {campaignId} = useParams<RouterParams>()\r\n\r\n    useEffect(() => {\r\n        getChains(campaignId).then(res => setChains(res))\r\n    }, [campaignId])\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleDialogSave = (data: any) => {\r\n        if (data.name && campaignId) {\r\n            let parsedData = {...data, campaign: parseInt(campaignId)}\r\n            handleAddChain(parsedData)\r\n            setOpen(false);\r\n        } else {\r\n            alert('error: No name or campaign')\r\n        }\r\n    }\r\n\r\n    const handleAddChain = (data: CreateChainParams) => {\r\n        createChain(data).then(res => window.location.reload())\r\n    };\r\n\r\n    const handleCardRedirect = (id: string | number) => {\r\n        history.push(`${history.location.pathname}/${id}`)\r\n    }\r\n\r\n    return (\r\n        <Grid container justifyContent={\"center\"}>\r\n            <Dialog title={\"Add Chain\"} open={open} onSave={handleDialogSave} onClose={handleClose}/>\r\n            <Grid container style={{padding: 20}}>\r\n                <Button variant={\"contained\"} color={\"primary\"} startIcon={<AddIcon/>} onClick={handleClickOpen}>Add\r\n                    Chain</Button>\r\n            </Grid>\r\n            {chains.map(chain => (\r\n                <Grid item style={{padding: 10}} key={chain.id}>\r\n                    <Card data={chain} onCardButtonClick={handleCardRedirect}/>\r\n                </Grid>\r\n            ))}\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default Builder\r\n\r\n\r\n","import React, {useEffect, useState} from \"react\";\r\nimport {Button, Grid} from \"@material-ui/core\";\r\nimport Card from \"../cards/Card\";\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Dialog from '../dialogs/Dialog'\r\nimport {CampaignParams, CreateCampaignParams} from \"../../util/Types\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {createCampaign, getCampaigns} from \"../../util/Util\";\r\n\r\n\r\nconst Builder = () => {\r\n    const [campaigns, setCampaigns] = useState<CampaignParams[]>([])\r\n    const [open, setOpen] = useState(false);\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        getCampaigns().then(res => setCampaigns(res))\r\n    }, [])\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleDialogSave = (data: any) => {\r\n        if (data.name) {\r\n            handleCampaignAdd(data)\r\n            setOpen(false);\r\n        } else {\r\n            alert('error: No name')\r\n        }\r\n    }\r\n\r\n    const openCampaignInfo = (id: string | number) => {\r\n        history.push(`/campaign/about/${id}`)\r\n    }\r\n\r\n    const handleCampaignAdd = (data: CreateCampaignParams) => {\r\n        createCampaign(data).then(res => window.location.reload())\r\n    };\r\n\r\n    const handleCardRedirect = (id: string | number) => {\r\n        history.push(`/campaign/${id}`)\r\n    }\r\n\r\n    return (\r\n        <Grid container justifyContent={\"center\"}>\r\n            <Dialog title={\"Add campaign\"} open={open} onSave={handleDialogSave} onClose={handleClose}/>\r\n            <Grid container style={{padding: 20}}>\r\n                <Button variant={\"contained\"} color={\"primary\"} startIcon={<AddIcon/>} onClick={handleClickOpen}>Add\r\n                    Campaign</Button>\r\n            </Grid>\r\n            {campaigns.map(campaign => (\r\n                <Grid item key={campaign.id} style={{padding: 10}}>\r\n                    <Card data={campaign} onCardButtonClick={handleCardRedirect} openCampaignInfo={openCampaignInfo}/>\r\n                </Grid>\r\n            ))}\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default Builder\r\n\r\n\r\n","import React, {useContext} from 'react';\r\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\r\nimport {AppBar, Button, CssBaseline, Toolbar, Typography} from \"@material-ui/core\";\r\nimport {signInWithGoogle, signOut} from '../../util/Firebase';\r\nimport {AuthContext} from \"../../util/Auth\";\r\nimport {AppbarParams} from \"../../util/Types\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n        },\r\n        appBar: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n        },\r\n        appBarShift: {\r\n            marginLeft: drawerWidth,\r\n            width: `calc(100% - ${drawerWidth}px)`,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        menuButton: {\r\n            marginRight: 36,\r\n        },\r\n        hide: {\r\n            display: 'none',\r\n        },\r\n        drawer: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n            whiteSpace: 'nowrap',\r\n        },\r\n        drawerOpen: {\r\n            width: drawerWidth,\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        drawerClose: {\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n            overflowX: 'hidden',\r\n            width: theme.spacing(7) + 1,\r\n            [theme.breakpoints.up('sm')]: {\r\n                width: theme.spacing(9) + 1,\r\n            },\r\n        },\r\n        toolbar: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'flex-end',\r\n            padding: theme.spacing(0, 1),\r\n            // necessary for content to be below app bar\r\n            ...theme.mixins.toolbar,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            // padding: theme.spacing(3),\r\n        },\r\n        title: {\r\n            flexGrow: 1\r\n        }\r\n    }),\r\n);\r\n\r\n\r\nconst Appbar = (props: AppbarParams) => {\r\n    const classes = useStyles();\r\n    const {children} = props;\r\n    const {currentUser} = useContext(AuthContext)\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline/>\r\n            <AppBar\r\n                position=\"fixed\"\r\n            >\r\n                <Toolbar>\r\n                    <Typography className={classes.title} variant=\"h6\" noWrap>\r\n                        GigaTurnip Admin\r\n                    </Typography>\r\n                    {currentUser ?\r\n                        <Button onClick={signOut} color={\"inherit\"}>\r\n                            Log out\r\n                        </Button>\r\n                        :\r\n                        <Button onClick={signInWithGoogle} color={\"inherit\"}>\r\n                            Login\r\n                        </Button>\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n            <main className={classes.content}>\r\n                <div className={classes.toolbar}/>\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Appbar\r\n","import React, {useContext} from \"react\";\r\nimport Graph from './components/graph/Graph'\r\nimport StageBuilder from './components/form-builders/StageBuilder'\r\nimport LogicBuilder from './components/form-builders/LogicBuilder'\r\nimport Actions from './components/actions/Actions'\r\nimport Task from './components/task/Task'\r\nimport Appbar from \"./components/appbar/Appbar\";\r\n\r\nimport {HashRouter as Router, Route, Switch} from \"react-router-dom\";\r\nimport Chains from \"./components/chains/Chains\";\r\nimport Campaigns from \"./components/campaigns/Campaigns\";\r\nimport SimpleAppbar from \"./components/appbar/SimpleAppbar\";\r\nimport About from \"./components/campaigns/About\";\r\nimport {AuthContext} from \"./util/Auth\";\r\n\r\n\r\nconst App = () => {\r\n    const {currentUser} = useContext(AuthContext)\r\n    if (currentUser) {\r\n        const token = localStorage.getItem(\"token\");\r\n        currentUser.getIdToken(false).then((idToken: string) => {\r\n            if (token) {\r\n                if (idToken !== token) {\r\n                    localStorage.setItem(\"token\", idToken);\r\n                    window.location.reload()\r\n                }\r\n            } else {\r\n                localStorage.setItem(\"token\", idToken);\r\n                window.location.reload()\r\n            }\r\n        })\r\n    }\r\n    return (\r\n        <div>\r\n            <Router>\r\n                <Switch>\r\n                    <Route path={\"/campaign/:campaignId\"}>\r\n                        <Appbar>\r\n                            <Route exact path=\"/campaign/:campaignId/chain/:chainId/createstage/:id\">\r\n                                <StageBuilder/>\r\n                            </Route>\r\n                            <Route exact path=\"/campaign/:campaignId/chain/:chainId/createlogic/:id\">\r\n                                <LogicBuilder/>\r\n                            </Route>\r\n                            {/*<Route exact path={\"/campaign/about/:id\"}>*/}\r\n                            {/*    <About />*/}\r\n                            {/*</Route>*/}\r\n                            <Route exact path=\"/campaign/:campaignId/chain/:chainId/task/:id\">\r\n                                <Task/>\r\n                            </Route>\r\n                            <Route exact path=\"/campaign/:campaignId/chain/:chainId/actions/:id\">\r\n                                <Actions/>\r\n                            </Route>\r\n                            <Route exact path=\"/campaign/:campaignId/chain\">\r\n                                <Chains/>\r\n                            </Route>\r\n                            <Route exact path=\"/campaign/:campaignId/chain/:chainId\">\r\n                                <Graph/>\r\n                            </Route>\r\n                        </Appbar>\r\n                    </Route>\r\n                    <Route path=\"/\">\r\n                        <SimpleAppbar>\r\n                            <Campaigns/>\r\n                        </SimpleAppbar>\r\n                    </Route>\r\n                </Switch>\r\n            </Router>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {AuthProvider} from \"./util/Auth\";\r\n\r\nReactDOM.render(\r\n    // <React.StrictMode>\r\n    <AuthProvider>\r\n        <App/>\r\n    </AuthProvider>,\r\n    // </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}