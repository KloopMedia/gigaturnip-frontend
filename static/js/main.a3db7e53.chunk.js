(this["webpackJsonpgigaturnip-frontend"]=this["webpackJsonpgigaturnip-frontend"]||[]).push([[0],{384:function(e){e.exports=JSON.parse('{"properties":{"label":{"type":"string","title":"Label"}},"type":"object"}')},389:function(e){e.exports=JSON.parse('{"type":"object","title":"Stage options","description":"Describe the stage you want.","properties":{"name":{"title":"Stage name","type":"string","description":"Example: Violation description form"},"description":{"title":"Stage description","type":"string","description":"Example: Form that describes an election violation","default":""},"allow_multiple_files":{"type":"boolean","title":"Allow multiple files","default":false},"count_complete":{"type":"boolean","title":"Count completed tasks","default":false},"is_creatable":{"type":"boolean","title":"Task is creatable","default":false},"copy_input":{"type":"boolean","title":"Copy input","default":false},"library":{"title":"Library","type":"string","default":""},"displayed_prev_stages":{"items":{"type":"string","title":"Stage"},"title":"Background Stages","type":"array"}},"dependencies":{},"required":["name"]}')},419:function(e,t,n){},676:function(e,t,n){},730:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(21),r=n.n(i),o=(n(419),n(38)),s=n(32),l=n.n(s),u=n(57),d=n(45),j=n(15),b=n(73),p=n(43),f=n(112);f.a.initializeApp({apiKey:"AIzaSyCXiwOUNsbzKH7sbSAZrqA9f7VOeCMdUOQ",authDomain:"gigaturnip-b6b5b.firebaseapp.com",projectId:"gigaturnip-b6b5b",storageBucket:"gigaturnip-b6b5b.appspot.com",messagingSenderId:"414429242328",appId:"1:414429242328:web:a4685f5ac6895ea767c8ad",measurementId:"G-Y8JTEJMTET"});var h=new f.a.auth.GoogleAuthProvider;f.a.firestore().settings({ignoreUndefinedProperties:!0});var O=function(){h.setCustomParameters({prompt:"select_account"}),f.a.auth().signInWithPopup(h)},g=function(){f.a.auth().signOut()},m=f.a,x=n(768),v=n(798),y=n(770),S=n(5),w=Object(x.a)((function(e){return Object(v.a)({root:{background:"#FFF",borderColor:"#000",borderWidth:"1px",borderStyle:"solid",borderRadius:"3px",fontSize:"12px",width:"150px",textAlign:"center",padding:10}})})),C=function(e){var t=e.data,n=e.style,a=w();return Object(S.jsxs)(y.a,{className:a.root,style:n,children:[Object(S.jsx)("div",{children:t.label}),Object(S.jsx)(b.b,{type:"target",position:b.c.Top,style:{borderRadius:"100%"}}),Object(S.jsx)(b.b,{type:"source",position:b.c.Bottom,style:{borderRadius:"100%"}})]})},k={borderColor:"#0041d0"},I=function(e){var t=e.data;return Object(S.jsx)(C,{data:t,style:k})},N={borderColor:"#32CD32"},_=function(e){var t=e.data;return Object(S.jsx)(C,{data:t,style:N})},E=n(79),T=n(384),D=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),r=Object(j.a)(i,2),s=r[0],l=r[1];Object(a.useEffect)((function(){s&&s.label&&""!==s.label?c(!0):c(!1)}),[s]);var u=function(e,t,n){console.log(t,n);var a=JSON.stringify(Object(o.a)(Object(o.a)({},s),{},{type:n}));e.dataTransfer.setData("application/reactflow",a),e.dataTransfer.effectAllowed="move"},d=function(){l(void 0)};return Object(S.jsxs)("aside",{children:[Object(S.jsx)("div",{className:"description",children:"You can drag these nodes to the pane on the right."}),Object(S.jsx)("div",{style:{marginRight:5},children:Object(S.jsx)(E.a,{schema:T,formData:s,onChange:function(e){return l(e.formData)},children:" "})}),Object(S.jsx)("div",{draggable:!1,style:{color:"red",display:"flex",justifyContent:"center",alignItems:"center",padding:10},children:!n&&"Enter Label to drag the node"}),Object(S.jsx)("div",{className:"dndnode stage",onDragEnd:d,onDragStart:function(e){return u(e,s?s.label:"","STAGE")},draggable:n,children:"Stage Node"}),Object(S.jsx)("div",{className:"dndnode logic",onDragEnd:d,onDragStart:function(e){return u(e,s?s.label:"","LOGIC")},draggable:n,children:"Logic Node"})]})},A=(n(676),n(385)),B=n.n(A).a.create({baseURL:"http://127.0.0.1:8000"});B.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="JWT "+t),e}),(function(e){return Promise.reject(e)}));var L=B,G="api/v1/campaigns/",P="api/v1/chains/",F="api/v1/taskstages/",R="api/v1/conditionalstages/",W="api/v1/tasks/",J=function(){var e=Object(a.useRef)(null),t=Object(p.f)(),n=Object(p.g)(),c=n.chainId,i=(n.campaignId,Object(a.useState)(null)),r=Object(j.a)(i,2),s=r[0],f=r[1],h=Object(a.useState)([]),O=Object(j.a)(h,2),g=O[0],m=O[1];Object(a.useEffect)((function(){Promise.all([L.get(F),L.get(R)]).then((function(e){var t=e[0].data,n=e[1].data;t.forEach((function(e){return e.type="STAGE"})),n.forEach((function(e){return e.type="LOGIC"}));var a=[].concat(Object(d.a)(t),Object(d.a)(n)).filter((function(e){return e.chain==c})),i=a.map((function(e){return{id:e.id.toString(),position:{x:parseFloat(e.x_pos),y:parseFloat(e.y_pos)},data:{label:e.name},type:e.type}}));return m(i),a})).then((function(e){e.forEach((function(e){e.in_stages.length>0&&e.in_stages.forEach((function(t){var n={source:t.toString(),target:e.id.toString(),id:"".concat(t,"-").concat(e.id),arrowHeadType:"arrow"};m((function(e){return Object(b.e)(n,e)}))}))}))}))}),[]);var x=function(e){return g.filter((function(t){return t.id==e})).pop()},v=function(e){return"STAGE"==e.type?F:"LOGIC"==e.type?R:void 0},y=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,c){var i,r,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=v(t))){e.next=6;break}return e.next=4,L.get(i+t.id+"/").then((function(e){return"in"===a?e.data.in_stages:"out"===a?e.data.out_stages:void 0})).catch((function(e){}));case 4:(r=e.sent)&&(o=r.map((function(e){return e.toString()})),s=[],"create"===c&&(s=[n].concat(Object(d.a)(o))),"delete"===c&&(s=o.filter((function(e){return e!==n}))),u=void 0,"in"===a&&(u={in_stages:s}),"out"===a&&(u={out_stages:s}),u&&(console.log(u),L.patch(i+t.id+"/",u)));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(o.a)(Object(o.a)({},t),{},{arrowHeadType:"arrow"}),a=x(n.target),c=x(n.source),i=n.target,r=n.source,m((function(e){return Object(b.e)(n,e)})),a&&y(a,r,"in","create"),c&&y(c,i,"out","create");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=x(t),c=x(n),a&&y(a,n,"in","delete"),c&&y(c,t,"out","delete");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,c,i,r,o,u,d,j;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.current.getBoundingClientRect(),c=n.dataTransfer.getData("application/reactflow"),i=s.project({x:n.clientX-a.left,y:n.clientY-a.top}),r=JSON.parse(c),o=r.label,u=r.type,t.next=9,E({type:u,position:i,label:o});case 9:d=t.sent,j={id:d,type:u,position:i,data:{label:o}},m((function(e){return e.concat(j)}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(e){var t={x_pos:e.position.x,y_pos:e.position.y},n=v(e);n&&L.patch(n+e.id+"/",t)},E=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:t.label,x_pos:t.position.x,y_pos:t.position.y,chain:parseInt(c),out_stages:[]},!(a=v(t))){e.next=7;break}return e.next=5,L.post(a,n);case 5:return i=e.sent,e.abrupt("return",i.data.id.toString());case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,n){console.log(n);var a=t.location.pathname;n.id&&("LOGIC"===n.type&&t.push("".concat(a,"/createlogic/").concat(n.id)),"STAGE"===n.type&&t.push("".concat(a,"/actions/").concat(n.id)),"default"===n.type&&(n.target||n.source)&&console.log("edge"))},A={LOGIC:I,STAGE:_};return Object(S.jsx)("div",{className:"dndflow",children:Object(S.jsxs)(b.d,{children:[Object(S.jsx)("div",{className:"reactflow-wrapper",ref:e,children:Object(S.jsx)(b.f,{nodeTypes:A,elements:g,onConnect:w,onElementsRemove:function(e){m((function(t){return function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){var t=e;if(n.includes(e.id)||n.includes(t.target)||n.includes(t.source)){if(e.hasOwnProperty("source")&&e.hasOwnProperty("target")){var a=e.target,c=e.source;C(a,c)}else{var i=v(e);i&&L.delete(i+e.id+"/")}return!1}return!0}))}(e,t)}))},onNodeDoubleClick:T,onEdgeDoubleClick:T,onLoad:function(e){return f(e)},onDrop:k,onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onNodeDragStop:function(e,t){N(t)},style:{width:"100%",height:700},children:Object(S.jsx)(b.a,{})})}),Object(S.jsx)(D,{})]})})},z=n(6),U=n(396),V=n(389),q=n(797),Y=n(777),M=(n(772),n(794),n(128)),X=function(e){var t=Object(a.useState)(Object(o.a)({},e.formData)),n=Object(j.a)(t,2),c=n[0],i=(n[1],Object(a.useState)([])),r=Object(j.a)(i,2),s=r[0],l=r[1];Object(a.useEffect)((function(){e.onChange(c)}),[c]);return Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{type:"file",onChange:function(e){var t=Object(d.a)(e.target.files);l(t)},multiple:e.allowMultipleFiles}),s.map((function(e,t){e.filename,e.progress,"".concat(e.filename,"_").concat(t)}))]})},H=function(e){var t=e.jsonSchema,n=e.uiSchema,a=e.formResponses,c=JSON.parse(t),i=JSON.parse(n),r=JSON.stringify(Object(o.a)(Object(o.a)({},a),{},{json_schema:c,ui_schema:i})),s={file:X};return Object(S.jsxs)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:[Object(S.jsx)(E.a,{schema:c,uiSchema:i,widgets:s,onSubmit:function(e){return console.log(e.formData)}}),Object(S.jsx)("br",{}),Object(S.jsx)(q.a,{id:"outlined-multiline-static",label:"JSON",multiline:!0,fullWidth:!0,defaultValue:"Default Value",variant:"outlined",InputProps:{readOnly:!0},value:t,style:{marginTop:15,marginBottom:15}}),Object(S.jsx)(q.a,{id:"outlined-multiline-static",label:"UI",multiline:!0,fullWidth:!0,defaultValue:"Default Value",variant:"outlined",InputProps:{readOnly:!0},value:n,style:{marginTop:15,marginBottom:30}}),Object(S.jsx)("br",{}),Object(S.jsx)(Y.a,{onClick:function(){navigator.clipboard.writeText(r).then((function(){return console.log("success")})).catch((function(e){return alert(e)}))},variant:"contained",color:"primary",style:{marginBottom:15},children:"Copy FUL STAGE to Clipboard"}),Object(S.jsx)(q.a,{id:"outlined-multiline-static",label:"FULL STAGE",multiline:!0,fullWidth:!0,defaultValue:"Default Value",variant:"outlined",InputProps:{readOnly:!0},value:r})]})},$={file:{displayName:"File",matchIf:[{types:["string"],widget:"file"}],defaultDataSchema:{},defaultUiSchema:{"ui:widget":"file"},type:"string"}},K=(n(375),n(778)),Q=n(390),Z=n.n(Q),ee=n(391),te=n.n(ee),ne=["id","json_schema","ui_schema"],ae=function(){var e=Object(p.g)(),t=e.id,n=(e.chainId,Object(a.useState)("")),c=Object(j.a)(n,2),i=c[0],r=c[1],s=Object(a.useState)(""),l=Object(j.a)(s,2),u=l[0],d=l[1],b=Object(a.useState)(V),f=Object(j.a)(b,2),h=f[0],O=(f[1],Object(a.useState)({})),g=Object(j.a)(O,2),m=g[0],x=g[1],v=Object(a.useState)(!1),y=Object(j.a)(v,2),w=y[0],C=y[1];Object(a.useEffect)((function(){t&&L.get(F+t+"/").then((function(e){return e.data})).then((function(e){e.id;var t=e.json_schema,n=e.ui_schema,a=Object(z.a)(e,ne),c=JSON.stringify(t),i=JSON.stringify(n);r(c),d(i),x(a)}))}),[t]);return Object(S.jsxs)("div",{children:[Object(S.jsx)(K.a,{style:{float:"right"},onClick:function(){C((function(e){return!e}))},children:w?Object(S.jsx)(te.a,{fontSize:"large"}):Object(S.jsx)(Z.a,{fontSize:"large"})}),w?Object(S.jsx)(H,{jsonSchema:i,uiSchema:u,formResponses:m}):Object(S.jsxs)("div",{children:[Object(S.jsx)(U.a,{schema:i,uischema:u,onChange:function(e,t){r(e),d(t)},mods:{customFormInputs:Object(o.a)({},$)}}),Object(S.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:Object(S.jsx)(E.a,{schema:h,formData:m,onChange:function(e){return x(e.formData)},onSubmit:function(){var e=null,n=null;i&&u&&(e=JSON.parse(i),n=JSON.parse(u));var a=Object(o.a)(Object(o.a)({},m),{},{json_schema:e,ui_schema:n});console.log(a),L.patch(F+t+"/",a).then((function(e){return alert("Saved")})).catch((function(e){return alert(e)}))}})})]})]})},ce=n(20),ie=n(779),re=n(796),oe=n(270),se=n(150),le=n.n(se),ue=n(190),de=n.n(ue),je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(oe.B)(e),a=Object(oe.G)(n,"",e,t),c=function(e,t){return function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""];return Object.keys(n).forEach((function(i){if("object"===typeof n[i]){var r=c.map((function(e){return"".concat(e,".").concat(i)}));n[i].__rjsf_additionalProperties&&""!==n[i].$name?a.push(n[i].$name):e(n[i],a,r)}else"$name"===i&&""!==n[i]&&c.forEach((function(e){e=e.replace(/^\./,"");var n=le()(t,e);("object"!==typeof n||de()(n))&&a.push(e)}))})),a}(e)},i=c(a,t);return i},be=function(){var e=Object(p.g)().id,t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),o=Object(j.a)(r,2),s=o[0],d=o[1],b=Object(a.useState)({}),f=Object(j.a)(b,2),h=f[0],O=f[1],g=Object(a.useState)({logic_array:{items:{"ui:order":["field","condition","value"]}},"ui:order":["logic_array"]}),m=Object(j.a)(g,2),x=(m[0],m[1],Object(a.useState)({})),v=Object(j.a)(x,2),y=v[0],w=v[1],C=Object(a.useState)(),k=Object(j.a)(C,2),I=k[0],N=k[1],_=Object(a.useState)(!1),T=Object(j.a)(_,2),D=T[0],A=T[1];Object(a.useEffect)((function(){var t=function(t){if(t){var n=L.get(F+t+"/").then((function(e){return e.data}));return n||L.get(R+t+"/").then((function(e){return e.data}))}return L.get(R+e+"/").then((function(e){return e.data}))},n=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.map(function(){var e=Object(u.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:return a=e.sent,e.abrupt("return",Object(ce.a)({},n,a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e&&function(){var e=Object(u.a)(l.a.mark((function e(){var a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(a=e.sent,w(a.conditions),c=void 0,!(c=D?a.out_stages:a.in_stages)){e.next=11;break}return e.next=9,n(c);case 9:r=e.sent,Promise.all(r).then((function(e){Object.keys(e).length>0&&(console.log("PingPong: ".concat(D,", Connected Stage: ").concat(e)),N(e),i(!0))}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[e,D]),Object(a.useEffect)((function(){I&&I.length>0&&(console.log(I),I.forEach((function(e){var t=Object.values(e)[0],n=(t.ui_schema,t.json_schema),a=je(n);d(a)})))}),[D,I]),Object(a.useEffect)((function(){O({items:{type:"object",title:"Logic",properties:{field:{enum:s,title:"Field",type:"string"},condition:{enum:["==","!=",">","<",">=","<=","ARRAY-CONTAINS","ARRAY-CONTAINS-NOT"],title:"Condition",type:"string"},value:{title:"Value",type:"string"}},dependencies:{},required:[]},title:"Logic Array",type:"array",dependencies:{},required:[]})}),[s]);return Object(S.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:c?Object(S.jsxs)("div",{children:[Object(S.jsx)(ie.a,{value:D,label:"Ping Pong",control:Object(S.jsx)(re.a,{onChange:function(e){A(e.target.checked)},color:"primary"})}),Object(S.jsx)(E.a,{schema:h,formData:y,onChange:function(e){return w(e.formData)},onSubmit:function(){var t={conditions:y,is_ping_pong:D};console.log(y),L.patch(R+e+"/",t).then((function(e){return alert("Saved")})).catch((function(e){return alert(e)}))}})]}):Object(S.jsx)("p",{children:"No node connection or end_ui detected. Connect to one or check if form has fields."})})},pe=(Object(x.a)((function(e){return Object(v.a)({formControl:{margin:e.spacing(1),minWidth:150},selectEmpty:{marginTop:e.spacing(2)}})})),function(){var e=Object(p.g)(),t=e.id,n=e.chainId,a=Object(p.f)(),c=function(){var e=Object(u.a)(l.a.mark((function e(){var c,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.location.pathname.split("/actions")[0],e.next=3,L.post("api/v1/cases/",{chain:n}).then((function(e){return e.data}));case 3:return i=e.sent,console.log(i),e.next=7,L.post(W,{case:i.id,stage:t}).then((function(e){return e.data}));case 7:r=e.sent,console.log(r),a.push("".concat(c,"/task/").concat(r.id));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(y.a,{children:Object(S.jsxs)(y.a,{container:!0,justify:"center",style:{background:"#7FB3D5"},component:"div",children:[Object(S.jsx)(y.a,{item:!0,style:{margin:20},children:Object(S.jsx)(Y.a,{onClick:function(){var e=a.location.pathname.split("/actions")[0];console.log(e),a.push("".concat(e,"/createstage/").concat(t))},children:"Create Form"})}),Object(S.jsx)(y.a,{item:!0,style:{margin:20},children:Object(S.jsx)(Y.a,{onClick:c,children:"Create Task (for test)"})})]})})}),fe=function(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({}),r=Object(j.a)(i,2),o=r[0],s=r[1],d=Object(a.useState)({}),b=Object(j.a)(d,2),f=b[0],h=b[1],O=Object(p.g)().id;Object(a.useEffect)((function(){O&&function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get(W+O).then((function(e){return e.data}));case 2:return t=e.sent,e.next=5,a=t.stage,L.get(F+a).then((function(e){return e.data}));case 5:n=e.sent,console.log(t,n),h(t.responses),c(n.json_schema),s(n.ui_schema);case 10:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}()()}),[O]);return Object(S.jsx)("div",{style:{width:"70%",minWidth:"400px",margin:"0 auto",display:"block",padding:10},children:Object(S.jsx)(E.a,{schema:n,uiSchema:o,formData:f,onChange:function(e){return h(e.formData)},onSubmit:function(){console.log(f);var e={responses:f};L.patch(W+O,e)}})})},he=n(7),Oe=n(55),ge=n(784),me=n(394),xe=n.n(me),ve=n(393),ye=n.n(ve),Se=n(395),we=n.n(Se),Ce=n(392),ke=n.n(Ce),Ie=n(780),Ne=n(781),_e=n(782),Ee=n(775),Te=n(795),De=n(783),Ae=n(800),Be=n(776),Le=n(733),Ge=n(785),Pe=n(786),Fe=c.a.createContext(),Re=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(j.a)(n,2),i=c[0],r=c[1];return Object(a.useEffect)((function(){m.auth().onAuthStateChanged((function(e){e&&(r(e),e.getIdToken(!0).then((function(e){localStorage.setItem("token",e)})))})),m.auth().onIdTokenChanged((function(e){e&&e.getIdToken(!1).then((function(e){localStorage.setItem("token",e)}))}))}),[]),Object(S.jsx)(Fe.Provider,{value:{currentUser:i},children:t})},We=240,Je=Object(x.a)((function(e){return Object(v.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:We,width:"calc(100% - ".concat(We,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:We,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:We,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(ce.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1},title:{flexGrow:1},formControl:{margin:e.spacing(1),alignItems:"center"},selectEmpty:{marginTop:e.spacing(2)},select:{},selectIcon:{fill:"white",top:"calc(50% - 14px)"}})})),ze=function(e){var t,n,c=Je(),i=Object(Oe.a)(),r=Object(p.f)(),o=Object(p.g)().campaignId,s=Object(a.useContext)(Fe).currentUser,l=e.children,u=Object(a.useState)(!1),d=Object(j.a)(u,2),b=d[0],f=d[1],h=Object(a.useState)(o),m=Object(j.a)(h,2),x=m[0],v=m[1],y=Object(a.useState)([]),w=Object(j.a)(y,2),C=w[0],k=w[1];console.log("CURRENT CAMPAIGN",o),Object(a.useEffect)((function(){L.get(G).then((function(e){return e.data})).then((function(e){console.log(e),k(e)}))}),[]);return Object(S.jsxs)("div",{className:c.root,children:[Object(S.jsx)(Ie.a,{}),Object(S.jsx)(Ne.a,{position:"fixed",className:Object(he.a)(c.appBar,Object(ce.a)({},c.appBarShift,b)),children:Object(S.jsxs)(_e.a,{children:[Object(S.jsx)(K.a,{color:"inherit","aria-label":"open drawer",onClick:function(){f(!0)},edge:"start",className:Object(he.a)(c.menuButton,Object(ce.a)({},c.hide,b)),children:Object(S.jsx)(ke.a,{})}),Object(S.jsx)(M.a,{className:c.title,variant:"h6",noWrap:!0,children:"GigaTurnip Admin"}),Object(S.jsx)(Ee.a,{className:c.formControl,size:"small",children:Object(S.jsx)(Te.a,{className:c.select,autoWidth:!0,labelId:"campaign-select-label",id:"campaign-select-label",value:x,onChange:function(e){var t=e.target.value;console.log(t),v(t),r.push("/campaign/".concat(t))},label:"Campaign",disableUnderline:!0,style:{color:"white"},inputProps:{classes:{icon:c.selectIcon}},children:C.map((function(e){return Object(S.jsx)(De.a,{value:e.id,children:e.name},"".concat(e.name,"_").concat(e.id))}))})}),s?Object(S.jsx)(Y.a,{onClick:g,color:"inherit",children:"Log out"}):Object(S.jsx)(Y.a,{onClick:O,color:"inherit",children:"Login"})]})}),Object(S.jsxs)(Ae.a,{variant:"permanent",className:Object(he.a)(c.drawer,(t={},Object(ce.a)(t,c.drawerOpen,b),Object(ce.a)(t,c.drawerClose,!b),t)),classes:{paper:Object(he.a)((n={},Object(ce.a)(n,c.drawerOpen,b),Object(ce.a)(n,c.drawerClose,!b),n))},children:[Object(S.jsx)("div",{className:c.toolbar,children:Object(S.jsx)(K.a,{onClick:function(){f(!1)},children:"rtl"===i.direction?Object(S.jsx)(ye.a,{}):Object(S.jsx)(xe.a,{})})}),Object(S.jsx)(ge.a,{}),Object(S.jsx)(Be.a,{children:Object(S.jsxs)(Le.a,{button:!0,onClick:function(){return e="chain",void r.push("/campaign/".concat(o,"/").concat(e));var e},children:[Object(S.jsx)(Ge.a,{children:Object(S.jsx)(we.a,{})}),Object(S.jsx)(Pe.a,{primary:"Chains"})]})})]}),Object(S.jsxs)("main",{className:c.content,children:[Object(S.jsx)("div",{className:c.toolbar}),l]})]})},Ue=n(59),Ve=n(787),qe=n(789),Ye=n(788),Me=Object(x.a)({root:{width:300},extra:{marginBottom:15}}),Xe=function(e){var t=Me(),n=e.chain,a=n.id,c=n.campaign,i=n.name,r=n.description,o=Object(p.f)();return Object(S.jsxs)(Ve.a,{className:t.root,children:[Object(S.jsxs)(Ye.a,{children:[Object(S.jsx)(M.a,{variant:"h5",component:"h2",gutterBottom:!0,children:i}),Object(S.jsxs)(M.a,{className:t.extra,variant:"subtitle2",color:"textSecondary",children:["ID: ",a," Campaign: ",c]}),Object(S.jsx)(M.a,{variant:"body1",component:"p",children:r||Object(S.jsx)("br",{})})]}),Object(S.jsx)(qe.a,{children:Object(S.jsx)(Y.a,{size:"small",onClick:function(){o.push("".concat(o.location.pathname,"/").concat(a))},children:"Open"})})]})},He=n(202),$e=n.n(He),Ke=n(791),Qe=n(790),Ze=n(205),et=n(792),tt=n(793),nt=Object(x.a)({avatar:{backgroundColor:Ze.a[100],color:Ze.a[600]}}),at=function(e){nt();var t=Object(p.g)().campaignId,n=e.onClose,c=e.onSave,i=e.open,r=Object(a.useState)(""),o=Object(j.a)(r,2),s=o[0],l=o[1],u=Object(a.useState)(""),d=Object(j.a)(u,2),b=d[0],f=d[1],h=Object(a.useState)(t),O=Object(j.a)(h,2),g=O[0],m=(O[1],function(){n()});return Object(S.jsxs)(Qe.a,{onClose:m,"aria-labelledby":"simple-dialog-title",open:i,children:[Object(S.jsx)(Ke.a,{children:"Add Chain"}),Object(S.jsx)(et.a,{children:Object(S.jsxs)(y.a,{container:!0,justify:"center",children:[Object(S.jsx)(y.a,{container:!0,item:!0,children:Object(S.jsx)(q.a,{fullWidth:!0,label:"Name",onChange:function(e){var t=e.target.value;l(t||"")}})}),Object(S.jsx)(y.a,{container:!0,item:!0,children:Object(S.jsx)(q.a,{fullWidth:!0,label:"Description",multiline:!0,rows:4,onChange:function(e){var t=e.target.value;f(t||"")}})})]})}),Object(S.jsxs)(tt.a,{children:[Object(S.jsx)(Y.a,{onClick:function(){if(s&&g){var e=parseInt(g);c({name:s,description:b,campaign:e})}},children:"Save"}),Object(S.jsx)(Y.a,{onClick:m,children:"Close"})]})]})},ct=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(j.a)(i,2),o=r[0],s=r[1],l=Object(p.g)().campaignId;Object(a.useEffect)((function(){L.get(P).then((function(e){return e.data})).then((function(e){console.log(e);var t=e.filter((function(e){var t;return(null===(t=e.campaign)||void 0===t?void 0:t.toString())==l}));c(t)}))}),[]);var u=function(e){console.log(e),L.post(P,e).then((function(e){console.log(e),window.location.reload(!1)}))};return Object(S.jsxs)(y.a,{container:!0,justify:"center",children:[Object(S.jsx)(at,{open:o,onSave:function(e){s(!1),u(e)},onClose:function(){s(!1)}}),Object(S.jsx)(y.a,{container:!0,style:{padding:20},children:Object(S.jsx)(Y.a,{variant:"contained",color:"primary",startIcon:Object(S.jsx)($e.a,{}),onClick:function(){s(!0)},children:"Add Chain"})}),n.map((function(e){return Object(S.jsx)(y.a,{item:!0,style:{padding:10},children:Object(S.jsx)(Xe,{chain:e},e.id)})}))]})},it=Object(x.a)({root:{width:300},extra:{marginBottom:15}}),rt=function(e){var t=it(),n=e.chain,a=n.id,c=n.name,i=n.description,r=Object(p.f)();return Object(S.jsxs)(Ve.a,{className:t.root,children:[Object(S.jsxs)(Ye.a,{children:[Object(S.jsx)(M.a,{variant:"h5",component:"h2",gutterBottom:!0,children:c}),Object(S.jsxs)(M.a,{className:t.extra,variant:"subtitle2",color:"textSecondary",children:["ID: ",a]}),Object(S.jsx)(M.a,{variant:"body1",component:"p",children:i||Object(S.jsx)("br",{})})]}),Object(S.jsx)(qe.a,{children:Object(S.jsx)(Y.a,{size:"small",onClick:function(){r.push("/campaign/".concat(a))},children:"Open"})})]})},ot=Object(x.a)({avatar:{backgroundColor:Ze.a[100],color:Ze.a[600]}}),st=function(e){ot();var t=e.onClose,n=e.onSave,c=e.open,i=Object(a.useState)(""),r=Object(j.a)(i,2),o=r[0],s=r[1],l=Object(a.useState)(""),u=Object(j.a)(l,2),d=u[0],b=u[1],p=Object(a.useState)(),f=Object(j.a)(p,2),h=f[0],O=(f[1],function(){t()});return Object(S.jsxs)(Qe.a,{onClose:O,"aria-labelledby":"simple-dialog-title",open:c,children:[Object(S.jsx)(Ke.a,{children:"Add Chain"}),Object(S.jsx)(et.a,{children:Object(S.jsxs)(y.a,{container:!0,justify:"center",children:[Object(S.jsx)(y.a,{container:!0,item:!0,children:Object(S.jsx)(q.a,{fullWidth:!0,label:"Name",onChange:function(e){var t=e.target.value;s(t||"")}})}),Object(S.jsx)(y.a,{container:!0,item:!0,children:Object(S.jsx)(q.a,{fullWidth:!0,label:"Description",multiline:!0,rows:4,onChange:function(e){var t=e.target.value;b(t||"")}})})]})}),Object(S.jsxs)(tt.a,{children:[Object(S.jsx)(Y.a,{onClick:function(){o?n({name:o,description:d,campaign:h}):alert("error: No name")},children:"Save"}),Object(S.jsx)(Y.a,{onClick:O,children:"Close"})]})]})},lt=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(j.a)(i,2),o=r[0],s=r[1];Object(a.useEffect)((function(){L.get(G).then((function(e){return e.data})).then((function(e){console.log(e),c(e)}))}),[]);var l=function(e){L.post(G,e).then((function(e){console.log(e),window.location.reload(!1)}))};return Object(S.jsxs)(y.a,{container:!0,justify:"center",children:[Object(S.jsx)(st,{open:o,onSave:function(e){s(!1),l(e)},onClose:function(){s(!1)}}),Object(S.jsx)(y.a,{container:!0,style:{padding:20},children:Object(S.jsx)(Y.a,{variant:"contained",color:"primary",startIcon:Object(S.jsx)($e.a,{}),onClick:function(){s(!0)},children:"Add Campaign"})}),n.map((function(e){return Object(S.jsx)(y.a,{item:!0,style:{padding:10},children:Object(S.jsx)(rt,{chain:e},e.id)})}))]})},ut=240,dt=Object(x.a)((function(e){return Object(v.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:ut,width:"calc(100% - ".concat(ut,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:ut,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:ut,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(ce.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1},title:{flexGrow:1}})})),jt=function(e){var t=dt(),n=(Object(Oe.a)(),c.a.useState(!1)),i=Object(j.a)(n,2),r=i[0],o=(i[1],e.children),s=Object(a.useContext)(Fe).currentUser,l=(Object(p.f)(),Object(p.g)().campaignId);console.log(l);return Object(S.jsxs)("div",{className:t.root,children:[Object(S.jsx)(Ie.a,{}),Object(S.jsx)(Ne.a,{position:"fixed",className:Object(he.a)(t.appBar,Object(ce.a)({},t.appBarShift,r)),children:Object(S.jsxs)(_e.a,{children:[Object(S.jsx)(M.a,{className:t.title,variant:"h6",noWrap:!0,children:"GigaTurnip Admin"}),s?Object(S.jsx)(Y.a,{onClick:g,color:"inherit",children:"Log out"}):Object(S.jsx)(Y.a,{onClick:O,color:"inherit",children:"Login"})]})}),Object(S.jsxs)("main",{className:t.content,children:[Object(S.jsx)("div",{className:t.toolbar}),o]})]})},bt=function(){Object(a.useContext)(Fe).currentUser;return Object(S.jsx)("div",{children:Object(S.jsx)(Ue.a,{children:Object(S.jsxs)(p.c,{children:[Object(S.jsx)(p.a,{path:"/campaign/:campaignId",children:Object(S.jsxs)(ze,{children:[Object(S.jsx)(p.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/createstage/:id",children:Object(S.jsx)(ae,{})}),Object(S.jsx)(p.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/createlogic/:id",children:Object(S.jsx)(be,{})}),Object(S.jsx)(p.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/task/:id",children:Object(S.jsx)(fe,{})}),Object(S.jsx)(p.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId/actions/:id",children:Object(S.jsx)(pe,{})}),Object(S.jsx)(p.a,{exact:!0,path:"/campaign/:campaignId/chain",children:Object(S.jsx)(ct,{})}),Object(S.jsx)(p.a,{exact:!0,path:"/campaign/:campaignId/chain/:chainId",children:Object(S.jsx)(J,{})})]})}),Object(S.jsx)(p.a,{path:"/",children:Object(S.jsx)(jt,{children:Object(S.jsx)(lt,{})})})]})})})},pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,802)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(S.jsx)(Re,{children:Object(S.jsx)(bt,{})}),document.getElementById("root")),pt()}},[[730,1,2]]]);
//# sourceMappingURL=main.a3db7e53.chunk.js.map